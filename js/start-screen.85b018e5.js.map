{"version":3,"sources":["webpack:///./src/screens/Start.vue","webpack:///src/screens/Start.vue","webpack:///./src/screens/Start.vue?8029","webpack:///./src/screens/Start.vue?c4b9","webpack:///./src/isaac/models/ITMRText.js","webpack:///./src/screens/Start.vue?b25c","webpack:///./src/isaac/isaacConnect.js","webpack:///./src/isaac/models/ITMRColor.js","webpack:///./src/plugins/locale/translateFunction.js"],"names":["render","_vm","this","_c","_self","staticClass","style","getImgUrl","attrs","_v","_s","_f","$store","state","locale","on","cancel","staticRenderFns","components","BigButton","name","mounted","methods","component","ITMRText","constructor","value","pos","color","blink","size","isCenter","postfix","prefix","setPos","vector","setText","text","setPostfix","setPrefix","setColor","setBlink","removeBlink","setSize","setCenter","center","prepare","obj","equals","curText","IsaacConnect","port","lang","stats","success","errors","isConnected","events","onConnect","onReconnect","handlers","checkOutputTimer","searchServerTimer","setInterval","search","bind","consoleStyle","_log","fetch","method","body","then","res","json","out","clearInterval","connect","catch","err","stopSearch","testConnect","Math","round","sendToGame","m","clearAll","d","t","_signal","Promise","all","data","high","repeat","resolve","reject","_send","console","error","checkOutput","log","forEach","com","c","addHandler","func","removeHandler","msg","type","JSON","stringify","ITMRColor","r","g","b","a","val","l_Ru","strings","l_En"],"mappings":"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","file":"js/start-screen.85b018e5.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"startScreen\"},[_c('div',{staticClass:\"waitSplash\"},[_c('div',{staticClass:\"img\",style:(`background-image:url('${_vm.getImgUrl('hourglass')}')`),attrs:{\"alt\":\"hourglass\"}}),_c('div',{staticClass:\"text\"},[_vm._v(_vm._s(_vm._f(\"t\")(\"connectingWait\",_vm.$store.state.locale)))])]),_c('big-button',{on:{\"onClick\":_vm.cancel}},[_vm._v(_vm._s(_vm._f(\"t\")(\"cancel\",_vm.$store.state.locale)))])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"startScreen\">\n    <div class=\"waitSplash\">\n      <div class=\"img\" :style=\"`background-image:url('${getImgUrl('hourglass')}')`\" alt=\"hourglass\"/>\n      <div class=\"text\">{{\"connectingWait\" | t($store.state.locale)}}</div>\n    </div>\n    <big-button @onClick=\"cancel\">{{\"cancel\" | t($store.state.locale)}}</big-button>\n  </div>\n</template>\n\n<script>\nimport IsaacConnect from '@/isaac/isaacConnect'\nimport BigButton from '../components/BigButton.vue';\n\nexport default {\n  components: { BigButton },\n  name: 'startScreen',\n\n  mounted () {\n    this.$services.itmr = new IsaacConnect(8666, this.$store.state.locale);\n    this.$services.itmr.events.onConnect = () => {\n      this.$router.push('/channels');\n    }\n  },\n\n  methods: {\n    cancel () {\n      this.$services.itmr.stopSearch();\n      this.$router.push('/');\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n\n.waitSplash {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  font-size: 1.7rem;\n  margin-bottom: 21px;\n\n  .img {\n    height: 15vw;\n    width: 15vw;\n\n    max-width: 1024;\n    max-height: 1024;\n\n    margin: 4vh auto;\n\n    background-repeat: no-repeat;\n    background-size: contain;\n    background-position: center;\n\n    animation: hourglassAnim 1s ease-in-out infinite;\n  }\n}\n\n@keyframes hourglassAnim {\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Start.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Start.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Start.vue?vue&type=template&id=562e4441&\"\nimport script from \"./Start.vue?vue&type=script&lang=js&\"\nexport * from \"./Start.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Start.vue?vue&type=style&index=0&id=562e4441&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import ITMRColor from \"./ITMRColor\";\nimport ITMRVector from \"./ITMRVector\";\n\nexport default class ITMRText {\n\n  /**\n   * Create new Text for Isaac On Twitch Mod\n   * @param {String} name - Text id\n   * @param {String} value - Text value\n   * @param {ITMRVector} pos - Text position\n   * @param {ITMRColor} color - Text color\n   * @param {ITMRColor} blink - Text blink color\n   * @param {Number} size - Text size\n   * @param {Boolean} isCenter - Set text to center\n   * @param {String} postfix - Text postfix, added to the end of text\n   */\n  constructor (name, value, pos = null, color = null, blink = null, size = null, isCenter = null, postfix = null, prefix = null) {\n\n    this.name = name;\n    this.value = value;\n    this.pos = pos;\n    this.color = color;\n    this.blink = blink;\n    this.size = size;\n    this.isCenter = isCenter;\n    this.postfix = postfix;\n    this.prefix = prefix;\n\n  }\n\n  /**\n   * Change text position\n   * @param {ITMRVector} vector - Vector with new position\n   */\n  setPos (vector) {\n    this.pos = vector\n  }\n\n  /**\n   * Change text value\n   * @param {String} text - New text value\n   */\n  setText (text) {\n    this.value = text;\n  }\n\n  /**\n   * Change text postfix\n   * @param {String} postfix - New text postfix\n   */\n  setPostfix (postfix) {\n    this.postfix = postfix;\n  }\n\n  /**\n   * Change text prefix\n   * @param {String} prefix - New text prefix\n   */\n  setPrefix(prefix) {\n    this.prefix = prefix;\n  }\n\n  /**\n   * Change text color\n   * @param {ITMRColor|null} color - Text color\n   */\n  setColor (color) {\n    this.color = color\n  }\n\n  /**\n   * Change text blink color\n   * @param {ITMRColor|null} color - Blink color\n   */\n  setBlink (color) {\n    this.blink = color\n  }\n\n  /**\n   * Remove text blinking\n   */\n  removeBlink () {\n    this.blink = null;\n  }\n\n  /**\n   * Change text size\n   * @param {Number} size - New text size\n   */\n  setSize (size) {\n    this.size = size;\n  }\n\n  /**\n   * Change text centering\n   * @param {Boolean} center - Set text to center\n   */\n  setCenter (center) {\n    this.isCenter = center;\n  }\n\n  /**\n   * Return only not null fields for decreasing data size\n   * @returns {Object}\n   */\n  prepare () {\n\n    let obj = {};\n    obj['name'] = this.name;\n    obj['value'] = this.postfix ? `${this.value} ${this.postfix}` : this.value;\n    obj['value'] = this.prefix ? `${this.prefix} ${obj['value']}` : obj['value'];\n    if (this.pos) obj['pos'] = this.pos;\n    if (this.color) obj['color'] = this.color;\n    if (this.blink) obj['blink'] = this.blink;\n    if (this.size) obj['size'] = this.size;\n    if (this.isCenter) obj['isCenter'] = this.isCenter;\n\n    return obj;\n  }\n\n  /**\n   * Check if two texts is equals\n   * @param {ITMRText} text - Text for checking\n   * @returns {Boolean}\n   */\n  equals (text) {\n\n    if (text == null) return false;\n    let curText = this.prepare();\n\n    return curText?.name == text?.name &&\n      curText?.value == text?.value &&\n      curText?.pos == text?.pos &&\n      curText?.color == text?.color &&\n      curText?.blink == text?.blink &&\n      curText?.size == text?.size &&\n      curText?.postfix == text?.postfix &&\n      curText?.prefix == text?.prefix &&\n      curText?.isCenter == text?.isCenter;\n\n  }\n\n}","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Start.vue?vue&type=style&index=0&id=562e4441&prod&lang=scss&\"","import ITMRText from './models/ITMRText'\nimport t from '../plugins/locale/translateFunction'\n\nexport default class IsaacConnect {\n\n  constructor (port = 8666, lang = \"en\") {\n    // Requests count\n    this.stats = {\n      success: 0, // Success requests (including successful attempts)\n      errors: 0   // Failed requests\n    };\n\n    this.isConnected = false;\n\n    // Event handlers\n    this.events = {\n      onConnect: () => {},\n      onReconnect: () => {}\n    };\n\n    this.port = port; // Game port\n    this.lang = lang; // Localization\n\n    // Game to site handlers\n    this.handlers = {};\n\n    // Timers\n    this.checkOutputTimer = null;\n    this.searchServerTimer = setInterval(this.search.bind(this), 1000);\n\n    this.consoleStyle = 'background-color: #EFD8CD; color: #473A3C; border-radius: 100px;padding: 1px 4px;';\n\n    this._log('Search game server...')\n  }\n\n  /**\n   * Search active game server\n   */\n  search () {\n    fetch(`http://localhost:${this.port}`, {\n      method: 'POST',\n      body: `||{\"m\":\"ping\"}||\\n`\n    })\n    .then (res => res.json())\n    .then (res => {\n      if (res.out == \"pong\") {\n        this._log('Game server found')\n        clearInterval(this.searchServerTimer);\n        this.connect()\n      }\n    })\n    .catch (err => {})\n  }\n\n  /**\n   * Stop current game server searching\n   */\n  stopSearch() {\n    clearInterval(this.searchServerTimer);\n  }\n\n  /**\n   * Test requests\n   */\n  testConnect () {\n    setInterval(() => {\n      fetch(`http://localhost:${this.port}`, {\n        method: 'POST',\n        body: `||{\"m\":\"ping\"}||\\n`\n      })\n      .then (res => res.json())\n      .then (res => {\n        if (res.out == \"pong\") {\n          this.stats.success ++;\n        }\n      })\n      .catch (err => {this.stats.errors ++;})\n\n      this._log(`${this.stats.success}|${this.stats.errors} / ${Math.round(this.stats.errors/(this.stats.success + this.stats.errors)*100, 2)}%`);\n    }, 250)\n  }\n\n  /**\n   * Send connect request to game server\n   */\n  connect () {\n    this.sendToGame({\n      m: 'connect'\n    })\n    .then (res => {\n      if (res.out == 'success') {\n        this._log('Game connected');\n\n        // Launch checking game output for two-way connection\n        //this.checkOutputTimer = setInterval(() => this.checkOutput(), 1000);\n\n        this.isConnected = true;\n\n\n        this.clearAll().then(() => {\n          // Show text for player\n          this.sendToGame({\n            m: 'addText',\n            d: [new ITMRText('gameConnected', t('gameConnected', this.lang)).prepare()]\n          })\n\n          // Call event onConnect\n          this._signal('onConnect');\n        });\n\n      }\n    });\n  }\n\n\n  /**\n   * Clear all UI elements from mod in game\n   */\n  clearAll() {\n\n    return Promise.all([\n      // Remove pollframes\n      this.sendToGame({ m: 'removePollframes' }, true),\n\n      // Remove progress bar\n      this.sendToGame({ m: 'removeProgressBar' }, true),\n\n      // Clear text\n      this.sendToGame({\n        m: 'clearText'\n      }, true)\n    ]);\n\n  }\n\n\n  /**\n   * Send data to game server\n   * @param {Object} data - Data for sending to game\n   * @param {Boolean} high - If high = true, resend data more times if request failed\n   * @param {Number} repeat - Current attempt number\n   */\n  sendToGame (data, high = false, repeat = 0) {\n\n    return new Promise((resolve, reject) => {\n      this._send(data, repeat, high)\n      .then (res => res.json())\n      .catch(err => {\n        console.error(err);\n        reject(err);\n      })\n      .then(\n        res => {\n          this.isConnected = true;\n          resolve(res);\n        }\n      )\n      .catch(err => {\n        console.error(err);\n      });\n    });\n\n  }\n\n  /**\n   * Request output data from game\n   */\n  checkOutput () {\n    fetch(`http://localhost:${this.port}`, {\n      method: 'POST',\n      body: `||{\"m\":\"out\"}||\\n`\n    })\n    .then (res => res.json())\n    .then (res => {\n      if (!this.isConnected) {\n\n        console.log(\"send reconnect\");\n\n        this.sendToGame({\n          m: 'removeText',\n          d: ['siteMessage']\n        })\n\n        this._signal('onReconnect');\n      }\n\n\n      this.isConnected = true;\n      res.out.forEach(com => {\n        if (this.handlers[com.c]) {\n          this.handlers[com.c](com.d);\n        }\n        else {\n          this._log(`Not found handler for ${com.c}`);\n        }\n      });\n    })\n    .catch(err => {\n      this.isConnected = false;\n      this._log('Connection to Isaac skip request', 'warn');\n    })\n  }\n\n  /**\n   * Add handler for request\n   * @param {String} name - Value from field output.c in checkOutput method\n   * @param {Function} func - Function that is triggered when a command is received\n   */\n  addHandler (name, func) {\n    this.handlers[name] = func;\n  }\n\n /**\n * Remove existing handler\n * @param {String} name - Value from field output.c in checkOutput method\n */\n  removeHandler (name) {\n    delete this.handlers[name];\n  }\n\n  /**\n   * Using inside this class for calling callbacks for events\n   * @param {String} name - Event name\n   * @param {Object} data - Data from event\n   */\n  _signal(name, data = null) {\n    if (this.events[name]) {\n      this.events[name](data);\n    }\n  }\n\n  /**\n   * Log to console with style\n   * @param {String} msg - Message for console\n   * @param {String} type - Log function: log, warning or error\n   */\n  _log (msg, type = 'log') {\n    console[type]('%cITMR%c ' + msg, this.consoleStyle, '');\n  }\n\n  /**\n   *\n   * @param {Object} data - Data for sending\n   * @param {Number} repeat - Current attempt\n   * @param {Boolean} high - TRUE, if data has high priority\n   */\n  _send (data, repeat = 1, high = false) {\n    return fetch(`http://localhost:${this.port}`, {\n      method: 'POST',\n      body: `||${JSON.stringify(data)}||\\n`\n    }).catch(function (error) {\n\n      this.isConnected = false;\n      this._log('Connection to Isaac is broken', 'error');\n\n      if (repeat > 3 && !high) {\n        throw error;\n      }\n      if (repeat > 6 && high) {\n        throw error;\n      }\n      return this._send(data, repeat + 1, high);\n    }.bind(this));\n  }\n\n}","export default class ITMRColor {\n\n  /**\n   * Create new color from RGBA data\n   * @param {Number} r - Red from 0 to 255\n   * @param {Number} g - Green from 0 to 255\n   * @param {Number} b - Blue from 0 to 255\n   * @param {Number} a - Alpha from 0 to 1\n   */\n  constructor(r,g,b,a) {\n    this.r = r/255;\n    this.g = g/255;\n    this.b = b/255;\n    this.a = a\n  }\n\n}","import l_En from './locales/en';\nimport l_Ru from './locales/ru';\n\nexport default function t (val, locale) {\n  if (locale == \"ru\") {\n    if (l_Ru.strings[val])\n      return l_Ru.strings[val];\n    else\n      return `!${val}!`;\n  }\n  else {\n    if (l_En.strings[val])\n      return l_En.strings[val];\n    else\n      return `!${val}!`;\n  }\n}"],"sourceRoot":""}