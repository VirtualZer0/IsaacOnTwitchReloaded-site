{"version":3,"sources":["webpack:///./node_modules/core-js/internals/to-string-tag-support.js","webpack:///./node_modules/core-js/internals/error-stack-clear.js","webpack:///./src/screens/Gamemode.vue?dd86","webpack:///./node_modules/core-js/internals/function-apply.js","webpack:///./node_modules/core-js/internals/a-possible-prototype.js","webpack:///./src/screens/Gamemode.vue","webpack:///./src/isaac/enums/Colors.js","webpack:///./src/isaac/enums/Gamemodes.js","webpack:///./src/isaac/helperFuncs.js","webpack:///./src/isaac/data/streamers.js","webpack:///./src/isaac/classes/Polls/Base/BasicPoll.js","webpack:///./src/isaac/data/ignorableItems.js","webpack:///./src/isaac/classes/Polls/Base/GraphicPoll.js","webpack:///./src/isaac/classes/Polls/Graphic/ItemsPoll.js","webpack:///./src/isaac/classes/Polls/Base/DefaultPoll.js","webpack:///./src/isaac/classes/Polls/Text/EventsPoll.js","webpack:///./src/isaac/classes/Polls/Graphic/TrinketsPoll.js","webpack:///./src/isaac/classes/Polls/Bar/PocketsPoll.js","webpack:///./src/isaac/classes/Message.js","webpack:///./src/isaac/classes/SpecialTriggers.js","webpack:///./src/isaac/classes/SpecialMessageHandler.js","webpack:///./src/isaac/Isaac.js","webpack:///src/screens/Gamemode.vue","webpack:///./src/screens/Gamemode.vue?a63d","webpack:///./src/screens/Gamemode.vue?2c67","webpack:///./node_modules/core-js/internals/to-string.js","webpack:///./src/libs/streamEvents.js","webpack:///./node_modules/core-js/internals/inherit-if-required.js","webpack:///./src/isaac/models/ITMRText.js","webpack:///./node_modules/core-js/internals/install-error-cause.js","webpack:///./node_modules/core-js/internals/proxy-accessor.js","webpack:///./node_modules/core-js/internals/error-stack-installable.js","webpack:///./src/libs/youtubeConnect.js","webpack:///./src/isaac/isaacConnect.js","webpack:///./node_modules/core-js/internals/object-set-prototype-of.js","webpack:///./node_modules/core-js/modules/es.error.cause.js","webpack:///./src/isaac/models/ITMRColor.js","webpack:///./src/libs/twitchConnect.js","webpack:///./node_modules/core-js/internals/normalize-string-argument.js","webpack:///./node_modules/core-js/internals/wrap-error-constructor-with-cause.js","webpack:///./node_modules/core-js/internals/classof.js","webpack:///./src/plugins/locale/translateFunction.js"],"names":["wellKnownSymbol","TO_STRING_TAG","test","module","exports","String","uncurryThis","$Error","Error","replace","TEST","arg","stack","V8_OR_CHAKRA_STACK_ENTRY","IS_V8_OR_CHAKRA_STACK","dropEntries","prepareStackTrace","NATIVE_BIND","FunctionPrototype","Function","prototype","apply","call","Reflect","bind","arguments","isCallable","$String","$TypeError","TypeError","argument","render","_vm","this","_c","_self","staticClass","_v","_s","_f","$store","state","locale","on","$event","start","attrs","getImgUrl","staticRenderFns","white","ITMRColor","lightGray","gray","darkGray","black","red","yellow","ITMR_GAMEMODES","EASY","NORMAL","CRAZY","getRandomElementsFromArr","arr","n","result","Array","len","length","taken","RangeError","x","Math","floor","random","weightedRandom","options","i","weights","weight","randString","characters","charactersLength","charAt","getNormalName","name","titleCase","str","splitStr","toLowerCase","split","toUpperCase","substring","join","twitch","youtube","trinket","BasicPoll","constructor","Isaac","ready","pollEnd","freezed","text","firstline","ITMRText","settings","textpos","l1","Colors","secondline","l2","handleMessage","msg","prepare","update","unfreeze","freeze","GraphicPoll","pollTime","delayTime","super","votes","allVotesCount","users","variants","isFirstUpdate","X","Y","services","itmr","sendToGame","m","d","f1","gfx","f2","f3","isPaused","setPostfix","t","lang","runNextAction","pollTexts","getPollText","setText","endPoll","prepareNextAction","texts","setPos","push","forEach","setBlink","handleMessaage","voteFor","source","userId","num","user","specialTriggers","triggers","russianHackers","enabled","shuffle","getWinner","indexOf","max","getPercents","variant","hideVotes","round","ItemsPoll","items","lists","action","then","res","setReady","out","playerItems","gamemode","filter","playerItem","ignorableItems","some","ignItem","find","item","id","e","console","log","chances","removeItems","itemsToRemove","map","itemId","currentItemPool","special","winner","remove","DefaultPoll","EventsPoll","preparedEvents","events","event","desc","specialTrigger","msgTrigger","selectedEvent","activate","setColor","TrinketsPoll","trinkets","PocketsPoll","positiveVotes","pollType","fillerVotes","playerType","types","title","sectors","barType","getFirstlineModifier","min","value","pickupType","substr","positive","ceil","Message","time","textsForRemove","SpecialTriggers","modifier","stopAll","key","Object","entries","SpecialMessageHandler","movePlayer","viewersAttack","heavyRain","sended","message","showInChat","resetSended","disableAll","object","activeUsers","ticksCount","chatWindow","timer","currentAction","nextAction","freezedActions","specialMessageHandler","onMessage","onSub","onSubscriber","onBits","onDonate","onSuperchat","onReconnect","sendSettings","addHandler","paused","acceptPoll","skipPoll","enable","_log","clearInterval","clearAll","setInterval","tick","loadData","streamers","streamer","channel","checkOutput","keys","isConnected","changeTextPos","pos","userName","closed","postMessage","chatMessage","type","subscriber","subsAndBits","subs","immediateAction","subtime","donate","bits","superchat","amount","selectedPoll","other","timings","vote","delay","pop","setPrefix","giveGift","active","passive","familiars","components","BigButton","mounted","methods","component","classof","TextMessage","trim","DonateMessage","Subscriber","Follower","isObject","setPrototypeOf","$this","dummy","Wrapper","NewTarget","NewTargetPrototype","color","blink","size","isCenter","postfix","prefix","vector","removeBlink","setSize","setCenter","center","obj","equals","curText","createNonEnumerableProperty","O","cause","defineProperty","f","Target","Source","configurable","get","set","it","fails","createPropertyDescriptor","error","YoutubeConnect","streamURLString","apikey","reverse","streamURL","URL","lastMessagesId","vuewersCount","nextPageToken","consoleStyle","hostname","streamId","searchParams","pathname","onFollower","onConnect","onDisconnect","onError","connect","fetch","json","chatId","liveStreamingDetails","activeLiveChatId","snippet","channelId","_updateChat","updTimer","catch","err","_signal","disconnect","updateViewers","viewersCount","concurrentViewers","includes","splice","authorChannelId","authorDetails","displayName","superChatDetails","tier","amountMicros","superStickerDetails","displayMessage","data","IsaacConnect","port","stats","success","errors","handlers","checkOutputTimer","searchServerTimer","search","method","body","stopSearch","testConnect","Promise","all","high","repeat","resolve","reject","_send","com","c","func","removeHandler","JSON","stringify","anObject","aPossiblePrototype","setter","CORRECT_SETTER","getOwnPropertyDescriptor","proto","__proto__","undefined","$","global","wrapErrorConstructorWithCause","WEB_ASSEMBLY","WebAssembly","FORCED","exportGlobalErrorCauseWrapper","ERROR_NAME","wrapper","arity","forced","exportWebAssemblyErrorCauseWrapper","target","stat","init","r","g","b","a","TwitchConnect","botname","server","lastFollowers","plannedDisconnect","window","location","protocol","webSocket","WebSocket","onmessage","onerror","onclose","onClose","onopen","onOpen","startCheckNewFollowers","checkFollowersFrom","Date","now","waitUserId","_checkFollowers","updFollowersTimer","stopCheckNewFollowers","headers","stream","viewers","parsed","_parseMessage","command","tags","hasOwnProperty","parseFloat","bitsType","bitsCount","send","readyState","close","follower","from_id","followed_at","from_name","rawMessage","parsedMessage","original","username","tagIndex","userIndex","commandIndex","channelIndex","messageIndex","slice","keyedTags","val","splitted","startsWith","toString","$default","getBuiltIn","hasOwn","isPrototypeOf","copyConstructorProperties","proxyAccessor","inheritIfRequired","normalizeStringArgument","installErrorCause","clearErrorStack","ERROR_STACK_INSTALLABLE","DESCRIPTORS","IS_PURE","FULL_NAME","IS_AGGREGATE_ERROR","STACK_TRACE_LIMIT","OPTIONS_POSITION","path","OriginalError","OriginalErrorPrototype","BaseError","WrappedError","TO_STRING_TAG_SUPPORT","classofRaw","$Object","CORRECT_ARGUMENTS","tryGet","tag","callee","l_Ru","strings","l_En"],"mappings":"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","file":"js/gamemode-screen.e4b7367f.js","sourcesContent":["var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nvar $Error = Error;\nvar replace = uncurryThis(''.replace);\n\nvar TEST = (function (arg) { return String($Error(arg).stack); })('zxcasd');\nvar V8_OR_CHAKRA_STACK_ENTRY = /\\n\\s*at [^:]*:[^\\n]*/;\nvar IS_V8_OR_CHAKRA_STACK = V8_OR_CHAKRA_STACK_ENTRY.test(TEST);\n\nmodule.exports = function (stack, dropEntries) {\n  if (IS_V8_OR_CHAKRA_STACK && typeof stack == 'string' && !$Error.prepareStackTrace) {\n    while (dropEntries--) stack = replace(stack, V8_OR_CHAKRA_STACK_ENTRY, '');\n  } return stack;\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Gamemode.vue?vue&type=style&index=0&id=792c237c&prod&lang=scss&\"","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar FunctionPrototype = Function.prototype;\nvar apply = FunctionPrototype.apply;\nvar call = FunctionPrototype.call;\n\n// eslint-disable-next-line es/no-reflect -- safe\nmodule.exports = typeof Reflect == 'object' && Reflect.apply || (NATIVE_BIND ? call.bind(apply) : function () {\n  return call.apply(apply, arguments);\n});\n","var isCallable = require('../internals/is-callable');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument) {\n  if (typeof argument == 'object' || isCallable(argument)) return argument;\n  throw $TypeError(\"Can't set \" + $String(argument) + ' as a prototype');\n};\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"gamemodeScreen\"},[_c('h1',[_vm._v(_vm._s(_vm._f(\"t\")(\"gamemode\",_vm.$store.state.locale)))]),_c('div',{staticClass:\"panel-container\"},[_c('div',{staticClass:\"panel hoverable\",on:{\"click\":function($event){return _vm.start(0)}}},[_c('h2',[_vm._v(_vm._s(_vm._f(\"t\")(\"easy\",_vm.$store.state.locale)))]),_c('p',[_vm._v(_vm._s(_vm._f(\"t\")(\"easyDesc\",_vm.$store.state.locale)))]),_c('img',{attrs:{\"src\":_vm.getImgUrl('easyImg')}})]),_c('div',{staticClass:\"panel hoverable\",on:{\"click\":function($event){return _vm.start(1)}}},[_c('h2',[_vm._v(_vm._s(_vm._f(\"t\")(\"default\",_vm.$store.state.locale)))]),_c('p',[_vm._v(_vm._s(_vm._f(\"t\")(\"defaultDesc\",_vm.$store.state.locale)))]),_c('img',{attrs:{\"src\":_vm.getImgUrl('defaultImg')}})]),_c('div',{staticClass:\"panel hoverable\",on:{\"click\":function($event){return _vm.start(2)}}},[_c('h2',[_vm._v(_vm._s(_vm._f(\"t\")(\"crazy\",_vm.$store.state.locale)))]),_c('p',[_vm._v(_vm._s(_vm._f(\"t\")(\"crazyDesc\",_vm.$store.state.locale)))]),_c('img',{attrs:{\"src\":_vm.getImgUrl('crazyImg')}})])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import ITMRColor from '../models/ITMRColor'\nexport default {\n\n  white: new ITMRColor(255,255,255,1),\n  lightGray: new ITMRColor(192, 192, 192, 1),\n  gray: new ITMRColor(128, 128, 128, 1),\n  darkGray: new ITMRColor(64, 64, 64, 1),\n  black: new ITMRColor(0,0,0,1),\n\n  red: new ITMRColor(255,0,0,1),\n  yellow: new ITMRColor(255, 215, 0, 1)\n\n}","/**\n * Isaac Twitch mod gamemodes enumeration\n */\nexport const ITMR_GAMEMODES = {\n  EASY: 0,\n  NORMAL: 1,\n  CRAZY: 2\n}","/**\n * Return N random elements from array\n * @param {Array} arr - Array for random selection\n * @param {Number} n - Count of random elements\n */\nexport function getRandomElementsFromArr (arr, n) {\n  let result = new Array(n),\n      len = arr.length,\n      taken = new Array(len);\n  if (n > len)\n      throw new RangeError(\"getRandomElementsFromArr: more elements taken than available\");\n  while (n--) {\n      let x = Math.floor(Math.random() * len);\n      result[n] = arr[x in taken ? taken[x] : x];\n      taken[x] = --len in taken ? taken[len] : len;\n  }\n  return result;\n}\n\n/**\n * Return random element from array based on weight\n * @param {Array} options - Array of objects with weight field\n */\nexport function weightedRandom(options) {\n  let i;\n\n  let weights = [];\n\n  for (i = 0; i < options.length; i++)\n    weights[i] = options[i].weight + (weights[i - 1] || 0);\n\n  let random = Math.random() * weights[weights.length - 1];\n\n  for (i = 0; i < weights.length; i++)\n    if (weights[i] > random)\n      break;\n\n  return options[i];\n}\n\n/**\n * Generate random string\n * @param {Number} length - Length of generated string\n * @returns {String} - Random string\n */\nexport function randString(length) {\n  var result = '';\n  var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  var charactersLength = characters.length;\n  for (var i = 0; i < length; i++) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\n\n/**\n * Converts #ITEM_NAME to Item Name\n * @param {String} name - Original name\n * @returns - Normalized name\n */\nexport function getNormalName(name) {\n  return titleCase(name.replace(/^#/, '').replace('_NAME', '').replace('_', ' ').replace('MOMS ', 'Mom\\'s ').replace('DADS ', 'Dad\\'s '));\n}\n\n/**\n * Capitalize first letter of each word\n * @param {String} str - Original string\n * @returns - Capitalized string\n */\nexport function titleCase(str) {\n  var splitStr = str.toLowerCase().split(' ');\n  for (var i = 0; i < splitStr.length; i++) {\n    splitStr[i] = splitStr[i].charAt(0).toUpperCase() + splitStr[i].substring(1);\n  }\n  return splitStr.join(' ');\n}","/**\n * Contains all streamers with uniqie trinkets\n */\nexport default [\n\n  {\n    name: \"Neonomi\",\n    twitch: \"neonomi\",\n    youtube: \"UChDAzHts9B7sZIvq9NqtW7g\",\n    trinket: \"Neo glasses\"\n  },\n\n  {\n    name: \"Hutts\",\n    twitch: \"huttsgaming\",\n    youtube: \"UCy3avhfHpBbbgwZpNvuVklg\",\n    trinket: \"Hair clap\"\n  },\n\n  {\n    name: \"Tijoe\",\n    twitch: \"tijoe\",\n    youtube: \"UCpcg8-wx6SOW3PfGT83E-BA\",\n    trinket: \"Torn fox ear\"\n  },\n\n  {\n    name: \"Rekvizit8bit\",\n    twitch: \"rekvizit8bit\",\n    youtube: \"UCSa-d35XCyltUYHZBDbq5mg\",\n    trinket: \"Gribulya's piece\"\n  },\n\n  {\n    name: \"Vertox\",\n    twitch: \"vertroxmt\",\n    youtube: \"UCMJr3O_NEpDSxqb9cYrZvcA\",\n    trinket: \"Spacesuit charge indicator\"\n  },\n\n  {\n    name: \"Mr. Ost\",\n    twitch: null,\n    youtube: \"UCyvSgWv830voOV6Nwqjwo4w\",\n    trinket: \"Greed coin eye\"\n  },\n\n  {\n    name: \"Crystal Channel\",\n    twitch: \"crystalous\",\n    youtube: \"UCKF1jFt8PUs240B7ccRXDfw\",\n    trinket: \"Crystal shard\"\n  },\n\n  {\n    name: \"Grizzly Guy\",\n    twitch: \"grizzlyguygaming\",\n    youtube: null,\n    trinket: \"Grizzly claw\"\n  },\n\n  {\n    name: \"HellYeah Play\",\n    twitch: \"hellyeahplay\",\n    youtube: \"UCMpHpyOyoYj_7uei_sF342Q\",\n    trinket: \"Inverted Cross\"\n  },\n\n  {\n    name: \"Vitec Play\",\n    twitch: \"vitecp\",\n    youtube: \"UCXHczq_8PytR6mEJeUTTrqw\",\n    trinket: \"UC's stem\"\n  },\n\n  {\n    name: \"Melharucos\",\n    twitch: \"melharucos\",\n    youtube: null,\n    trinket: \"Spider eye\"\n  },\n\n  {\n    name: \"D4N9\",\n    twitch: \"d4n9_twitch\",\n    youtube: \"UCIo6gZsEszFf66M0V3WHEAA\",\n    trinket: \"Broken D4-R4 console\"\n  },\n\n  {\n    name: \"bmvanquisher\",\n    twitch: \"bmvanquisher\",\n    youtube: null,\n    trinket: \"Pug tail\"\n  }\n\n]","import Isaac from '../../../Isaac'\nimport { TextMessage } from '../../../../libs/streamEvents';\n\nimport Colors from '../../../enums/Colors';\nimport ITMRText from '../../../models/ITMRText'\n\nimport { randString } from '../../../helperFuncs'\n\n/**\n * Generic class for all polls\n * @property {Isaac} Isaac - Main game controller\n * @property {Object} text - Poll text storage\n * @property {Boolean} ready - If TRUE, poll ready to start\n * @property {Boolean} pollEnd - If TRUE, handleMessage stop working\n */\nexport default class BasicPoll {\n\n  /**\n   * Create new basic poll\n   * @param {Isaac} Isaac - Main game controller\n   */\n  constructor (Isaac) {\n\n    this.Isaac = Isaac;\n    this.ready = true\n    this.pollEnd = false;\n    this.freezed = false;\n\n    this.text = {\n      firstline: new ITMRText(\n        `p_${randString(8)}_f`,\n        '',\n        Isaac.settings.textpos.l1,\n        Colors.yellow\n      ),\n\n      secondline: new ITMRText(\n        `p_${randString(8)}_s`,\n        '',\n        Isaac.settings.textpos.l2,\n      )\n    }\n\n  }\n\n  /**\n   * Receive current message from chat\n   * @param {TextMessage} msg\n   *\n   */\n  handleMessage(msg) {\n    return true;\n  }\n\n  /**\n   * Some polls, like ItemsPoll, needs to get data from the game before starting\n   */\n  prepare() {\n\n  }\n\n  /**\n   * Update current poll state\n   */\n  update() {\n    if (this.freezed) {\n      this.unfreeze();\n    }\n  }\n\n  /**\n   * Freeze current poll\n   */\n  freeze() {\n    this.freezed = true;\n  }\n\n  /**\n   * Unfreeze current poll\n   */\n  unfreeze() {\n    this.freezed = false;\n  }\n\n}","export default [\n\n  \"#THE_POLAROID_NAME\",\n  \"#THE_NEGATIVE_NAME\",\n  \"#KEY_PIECE_1_NAME\",\n  \"#KEY_PIECE_2_NAME\",\n  \"#BROKEN_SHOVEL_NAME\",\n  \"#BROKEN_SHOVEL2_NAME\",\n  \"#MOMS_SHOVEL_NAME\",\n  \"#KNIFE_PIECE_1_NAME\",\n  \"#KNIFE_PIECE_2_NAME\",\n  \"#DADS_NOTE_NAME\",\n  \"#DOGMA_NAME\",\n\n  // Powerful items and tainted player items\n  \"#DEATH_CERTIFICATE_NAME\",\n  \"#BAG_OF_CRAFTING_NAME\",\n  \"#FLIP_NAME\",\n  \"#RECALL_NAME\",\n  \"#HOLD_NAME\"\n\n]","import Colors from '../../../enums/Colors';\nimport ITMRText from '../../../models/ITMRText'\nimport Isaac from '../../../Isaac'\n\nimport t from '../../../../plugins/locale/translateFunction';\nimport { TextMessage } from '../../../../libs/streamEvents';\nimport BasicPoll from '../Base/BasicPoll';\n\nimport { randString } from '../../../helperFuncs'\nimport ITMRVector from '../../../models/ITMRVector';\n\n/**\n * Poll with images in variants\n */\nexport default class GraphicPoll extends BasicPoll {\n  /**\n   * Create new poll with 3 variants\n   * @param {Isaac} Isaac - Main game controller\n   * @param {Number} pollTime - Time for current poll\n   * @param {Number} delayTime - Time for delay after poll result\n   */\n  constructor(Isaac, pollTime, delayTime) {\n    super(Isaac);\n\n    /** Contains votes per variant @type {Array<Number>} */\n    this.votes = [0, 0, 0];\n\n    /** Contains all votes @type {Number} */\n    this.allVotesCount = 0;\n\n    /** Contains voted users @type {Array<Number|String>} */\n    this.users = {};\n\n    /** Contains variants for poll @type {Array<Object>} */\n    this.variants = [];\n\n    /** Time for polling @type {Number} */\n    this.pollTime = pollTime;\n\n    /** Time for delay fter polling ends @type {Number} */\n    this.delayTime = delayTime;\n\n    /** Need for sending pollframes @type {Boolean} */\n    this.isFirstUpdate = true;\n\n    /** Split second line on 3 parts @override @type {Array<ITMRText>} */\n    this.text.secondline = [\n      new ITMRText(\n        `p_${randString(8)}_s1`,\n        '',\n        Isaac.settings.textpos.l2,\n      ),\n\n      new ITMRText(\n        `p_${randString(8)}_s2`,\n        '',\n        { X: Isaac.settings.textpos.l2.X + 90, Y: Isaac.settings.textpos.l2.Y }\n      ),\n\n      new ITMRText(\n        `p_${randString(8)}_s3`,\n        '',\n        { X: Isaac.settings.textpos.l2.X + 180, Y: Isaac.settings.textpos.l2.Y }\n      ),\n    ]\n  }\n\n  /**\n   * Update current poll state\n   */\n  update() {\n    super.update();\n\n    // Send pollframes data\n    if (this.isFirstUpdate) {\n      this.Isaac.services.itmr.sendToGame({\n        m: 'addPollframes',\n        d: {\n          f1: this.variants[0]?.gfx,\n          f2: this.variants[1]?.gfx,\n          f3: this.variants[2]?.gfx,\n        }\n      });\n\n      this.isFirstUpdate = false;\n    }\n\n    if (!this.pollEnd) {\n\n      if (this.pollTime > 0) {\n\n        if (!this.Isaac.isPaused)\n        this.pollTime--;\n\n        this.text.firstline.setPostfix?.(` (${this.pollTime}${t('s', this.Isaac.lang)})`);\n\n        let pollTexts = this.getPollText();\n        for (let i = 0; i < pollTexts.length; i ++) {\n          this.text.secondline[i].setText?.(pollTexts[i]);\n        }\n      }\n      else {\n        this.pollEnd = true;\n        this.endPoll();\n        this.Isaac.prepareNextAction();\n      }\n\n    }\n    else {\n      if (this.delayTime > 0) {\n        if (!this.Isaac.isPaused)\n          this.delayTime--;\n\n        this.text.firstline.setPostfix?.(` (${this.delayTime}${t('s', this.Isaac.lang)})`)\n      }\n      else {\n\n        this.Isaac.services.itmr.sendToGame({\n          m: 'removeText',\n          d: [ this.text.firstline.name ]\n        })\n\n        this.text.firstline = null;\n        this.text.secondline = null;\n\n        this.Isaac.runNextAction();\n      }\n    }\n\n    let texts = []\n\n    if (this.text.firstline && this.text.firstline.prepare) {\n      this.text.firstline?.setPos(this.Isaac.settings.textpos.l1);\n      texts.push(this.text.firstline.prepare());\n    }\n\n    if (this.text.secondline) {\n      this.text.secondline[0].setPos?.(this.Isaac.settings.textpos.l2);\n      this.text.secondline[1].setPos?.({ X: this.Isaac.settings.textpos.l2.X + 90, Y: this.Isaac.settings.textpos.l2.Y });\n      this.text.secondline[2].setPos?.({ X: this.Isaac.settings.textpos.l2.X + 180, Y: this.Isaac.settings.textpos.l2.Y });\n\n      this.text.secondline.forEach?.(text => {\n        texts.push(text.prepare())\n      });\n    }\n\n    if (texts.length > 0) {\n      this.Isaac.services.itmr.sendToGame({\n        m: 'addText',\n        d: texts\n      });\n    }\n  }\n\n  /**\n   * Called when poll end\n   */\n  endPoll() {\n\n    // Requires custom implementation for every child class\n    this.text.firstline.setBlink(Colors.white);\n\n    this.Isaac.services.itmr.sendToGame({\n      m: 'removePollframes'\n    });\n\n    this.Isaac.services.itmr.sendToGame({\n      m: 'removeText',\n      d: [\n        this.text.secondline[0].name,\n        this.text.secondline[1].name,\n        this.text.secondline[2].name\n      ]\n    })\n\n    this.text.secondline = null;\n\n  }\n\n  /**\n   *\n   * @param {TextMessage} msg - Message from the chat\n   * @returns {Boolean} Show this message in chat\n   */\n  handleMessaage(msg) {\n\n    // Check if this is vote for #1\n    if (\n      msg.text == \"#1\" ||\n      msg.text == \"1\" ||\n      msg.text.toUpperCase() == this.variants[0].name.toUpperCase()\n    ) {\n      this.voteFor(0, `${msg.source}${msg.userId}`);\n      return false;\n    }\n\n    // Or for #2\n    else if (\n      msg.text == \"#2\" ||\n      msg.text == \"2\" ||\n      msg.text.toUpperCase() == this.variants[1].name.toUpperCase()\n    ) {\n      this.voteFor(1, `${msg.source}${msg.userId}`);\n      return false;\n    }\n\n    // Maybe, for #3?\n    else if (\n      msg.text == \"#3\" ||\n      msg.text == \"3\" ||\n      msg.text.toUpperCase() == this.variants[2].name.toUpperCase()\n    ) {\n      this.voteFor(2, `${msg.source}${msg.userId}`);\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Add vote for selected variant\n   * @param {Number} num - Variant number\n   * @param {Number|String} user - Unique user id\n   */\n  voteFor(num, user) {\n    if (this.pollEnd) return;\n\n    // If \"Russian hackers\" event is active\n    if (this.Isaac.specialTriggers.triggers.russianHackers.enabled) {\n      num = this.Isaac.specialTriggers.triggers.russianHackers.shuffle[num];\n    }\n\n    // If user already voted\n    if (typeof this.users[user] !== 'undefined' && num != this.users[user]) {\n\n      // Remove previous user vote\n      this.votes[this.users[user]]--;\n\n      // Add new vote\n      this.votes[num]++;\n\n      // Write new vote\n      this.users[user] = num;\n\n    }\n\n    else if (typeof this.users[user] === 'undefined') {\n      this.votes[num]++;\n      this.users[user] = num;\n      this.allVotesCount++;\n    }\n  }\n\n  /**\n   * Return winner from current poll\n   * @returns {Object} Winner\n   */\n  getWinner() {\n    if ((this.votes[0] == this.votes[1] && this.votes[1] == this.votes[2]) || this.allVotesCount == 0) {\n      return this.variants[Math.floor(Math.random() * this.variants.length)];\n    }\n\n    else if (this.votes[0] == this.votes[1] && this.votes[2] < this.votes[0]) {\n      return Math.random() > .5 ? this.variants[1] : this.variants[0]\n    }\n\n    else if (this.votes[1] == this.votes[2] && this.votes[0] < this.votes[1]) {\n      return Math.random() > .5 ? this.variants[2] : this.variants[1]\n    }\n\n    else if (this.votes[0] == this.votes[2] && this.votes[1] < this.votes[0]) {\n      return Math.random() > .5 ? this.variants[2] : this.variants[0]\n    }\n\n    return this.variants[this.votes.indexOf(Math.max(...this.votes))];\n  }\n\n  /**\n   * Returns the percentage for the selected poll option\n   * @param {Number} variant - Selected variant\n   * @returns {Number} Percents on selected variant\n   */\n  getPercents(variant) {\n    if (this.Isaac.settings.hideVotes) {\n      return '-'\n    }\n\n    return this.allVotesCount == 0 ? 0 : Math.round(this.votes[variant] / this.allVotesCount * 100);\n  }\n\n  /**\n   * Return poll text\n   * @returns {Array<String>} Poll text\n   */\n  getPollText() {\n\n    return [\n      `#1            ${this.getPercents(0)}%`,\n      `#2            ${this.getPercents(1)}%`,\n      `#3            ${this.getPercents(2)}%`\n    ]\n\n  }\n\n  freeze () {\n\n    super.freeze();\n    if (!this.pollEnd) {\n\n      this.Isaac.services.itmr.sendToGame({\n        m: 'removePollframes'\n      });\n\n      this.Isaac.services.itmr.sendToGame({\n        m: 'removeText',\n        d: [\n          this.text.firstline.name,\n          this.text.secondline[0].name,\n          this.text.secondline[1].name,\n          this.text.secondline[2].name\n        ]\n      })\n\n    }\n    else {\n\n      this.Isaac.services.itmr.sendToGame({\n        m: 'removeText',\n        d: [this.text.firstline.name]\n      })\n\n    }\n\n  }\n\n  unfreeze () {\n    super.unfreeze();\n\n    if (!this.pollEnd) {\n\n      this.Isaac.services.itmr.sendToGame({\n        m: 'addPollframes',\n        d: {\n          f1: this.variants[0]?.gfx,\n          f2: this.variants[1]?.gfx,\n          f3: this.variants[2]?.gfx,\n        }\n      });\n\n    }\n  }\n\n\n}","import Colors from '../../../enums/Colors';\nimport ITMRText from '../../../models/ITMRText'\nimport Isaac from '../../../Isaac'\nimport ignorableItems from '../../../data/ignorableItems'\nimport { getNormalName } from '../../../helperFuncs';\n\nimport t from '../../../../plugins/locale/translateFunction';\nimport { getRandomElementsFromArr } from '../../../helperFuncs'\nimport GraphicPoll from '../Base/GraphicPoll';\n\nexport default class ItemsPoll extends GraphicPoll {\n  /**\n   * Create new poll for items\n   * @param {Isaac} Isaac - Main game controller\n   */\n  constructor (Isaac, pollTime, delayTime) {\n\n    super(Isaac, pollTime, delayTime);\n\n    /** Contains all items in game @type {Array<Object>} */\n    this.items = this.Isaac.lists.items;\n\n    /** Contains poll type - give item or remove it @type {String} */\n    this.action = '';\n\n    // This poll needs to get data before launching\n    this.ready = false;\n\n  }\n\n  prepare () {\n    this.Isaac.services.itmr.sendToGame({\n      m: 'getPlayerItems'\n    })\n    .then(res => this.setReady(res.out));\n  }\n\n  setReady (playerItems) {\n\n    try {\n      if (this.Isaac.gamemode != 2) {\n        playerItems = playerItems.filter(\n          playerItem => !ignorableItems.some(ignItem => playerItem == this.items.find(item => item.name == ignItem)?.id)\n        );\n      }\n    } catch (e) {\n      console.log('Error in ignorableItems.js');\n    }\n\n\n    // Remove item with setting chance and only if player have more than 3 items\n    if (Math.random() < this.Isaac.settings.chances.removeItems/10 && playerItems.length > 3) {\n\n      // Set poll state\n      this.action = \"removeItem\";\n\n      // Set firstline text\n      this.text.firstline.setText(t('selectItemForRemove', this.Isaac.lang));\n\n      // Select three items for removing and getting names\n      let itemsToRemove = getRandomElementsFromArr(playerItems, 3)\n        .map(itemId => {\n          return this.items.find(item => item.id == itemId);\n        });\n\n      // Set poll variants\n      this.variants = itemsToRemove;\n\n    }\n\n    // Give item\n    else {\n\n      // Set poll state\n      this.action = \"giveItem\";\n\n      // Set firstline text\n      this.text.firstline.setText(t('selectItem', this.Isaac.lang));\n\n      // Remove collected and special items from variants\n      let currentItemPool = [];\n\n      if (this.Isaac.gamemode != 2) {\n        currentItemPool = this.items.filter(item => {\n          return !(playerItems.some(playerItem => playerItem == item?.id) || item.special || ignorableItems.some(ignItem => ignItem == item.name))\n        });\n      }\n      else {\n        currentItemPool = this.items.filter(item => {\n          return !playerItems.some(playerItem => playerItem == item.id)\n        });\n      }\n\n      // Set poll variants\n      this.variants = getRandomElementsFromArr(currentItemPool, 3)\n\n    }\n\n    this.ready = true;\n\n  }\n\n  endPoll() {\n    super.endPoll();\n\n    let winner = this.getWinner();\n\n    switch (this.action) {\n\n      case \"giveItem\":\n        this.text.firstline.setText(`${t('pollGiveResult', this.Isaac.lang)} ${getNormalName(winner.name)}`);\n        this.Isaac.services.itmr.sendToGame({\n          m: 'itemAction',\n          d: {\n            remove: false,\n            item: winner.id\n          }\n        }, true);\n        break;\n\n      case \"removeItem\":\n        this.text.firstline.setText(`${t('pollRemoveResult', this.Isaac.lang)} ${getNormalName(winner.name)}`);\n        this.Isaac.services.itmr.sendToGame({\n          m: 'itemAction',\n          d: {\n            remove: true,\n            item: winner.id\n          }\n        }, true);\n        break;\n    }\n\n  }\n\n\n}","import Colors from '../../../enums/Colors';\nimport ITMRText from '../../../models/ITMRText'\nimport Isaac from '../../../Isaac'\n\nimport t from '../../../../plugins/locale/translateFunction';\nimport { TextMessage } from '../../../../libs/streamEvents';\nimport BasicPoll from '../Base/BasicPoll';\n\n/**\n * Default poll with 3 variants\n */\nexport default class DefaultPoll extends BasicPoll {\n  /**\n   * Create new poll with 3 variants\n   * @param {Isaac} Isaac - Main game controller\n   * @param {Number} pollTime - Time for current poll\n   * @param {Number} delayTime - Time for delay after poll result\n   */\n  constructor (Isaac, pollTime, delayTime) {\n    super(Isaac);\n\n    /** Contains votes per variant @type {Array<Number>} */\n    this.votes = [0,0,0];\n\n    /** Contains all votes @type {Number} */\n    this.allVotesCount = 0;\n\n    /** Contains voted users @type {Array<Number|String>} */\n    this.users = {};\n\n    /** Contains variants for poll @type {Array<Object>} */\n    this.variants = [];\n\n    /** Time for polling @type {Number} */\n    this.pollTime = pollTime;\n\n    /** Time for delay fter polling ends @type {Number} */\n    this.delayTime = delayTime;\n  }\n\n  /**\n   * Update current poll state\n   */\n  update () {\n    super.update();\n\n    if (!this.pollEnd) {\n\n      if (this.pollTime > 0) {\n        this.text.firstline.setPostfix?.(` (${this.pollTime}${t('s', this.Isaac.lang)})`);\n        this.text.secondline.setText?.(this.getPollText());\n\n        if (!this.Isaac.isPaused)\n          this.pollTime--;\n      }\n      else {\n        this.pollEnd = true;\n        this.endPoll();\n        this.Isaac.prepareNextAction();\n      }\n\n    }\n    else {\n      if (this.delayTime > 0) {\n        if (!this.Isaac.isPaused)\n          this.delayTime--;\n\n        this.text.firstline.setPostfix?.(` (${this.delayTime}${t('s', this.Isaac.lang)})`)\n      }\n      else {\n\n        this.Isaac.services.itmr.sendToGame({\n          m: 'removeText',\n          d: [\n            this.text.firstline.name,\n            this.text.secondline.name\n          ]\n        })\n\n        this.text.firstline = null;\n        this.text.secondline = null;\n\n        this.Isaac.runNextAction();\n      }\n    }\n\n    let texts = []\n\n    if (this.text.firstline && this.text.firstline.prepare) {\n      texts.push(this.text.firstline.prepare())\n    }\n\n    if (this.text.secondline && this.text.secondline.prepare) {\n      texts.push(this.text.secondline.prepare())\n    }\n\n    if (texts.length > 0) {\n      this.Isaac.services.itmr.sendToGame({\n        m: 'addText',\n        d: texts\n      });\n    }\n  }\n\n  /**\n   * Called when poll end\n   */\n  endPoll () {\n\n    // Requires custom implementation for every child class\n    this.text.firstline.setBlink(Colors.white);\n    this.text.firstline.setPostfix?.(` (${this.delayTime}${t('s', this.Isaac.lang)})`)\n\n  }\n\n  /**\n   *\n   * @param {TextMessage} msg - Message from the chat\n   * @returns {Boolean} Show this message in chat\n   */\n  handleMessaage (msg) {\n    if (this.pollEnd) return;\n\n    // Check if this is vote for #1\n    if (\n      msg.text == \"#1\" ||\n      msg.text == \"1\" ||\n      msg.text.toUpperCase() == this.variants[0].name.toUpperCase()\n    ) {\n      this.voteFor(0, `${msg.source}${msg.userId}`);\n      return false;\n    }\n\n    // Or for #2\n    else if (\n      msg.text == \"#2\" ||\n      msg.text == \"2\" ||\n      msg.text.toUpperCase() == this.variants[1].name.toUpperCase()\n    ) {\n      this.voteFor(1, `${msg.source}${msg.userId}`);\n      return false;\n    }\n\n    // Maybe, for #3?\n    else if (\n      msg.text == \"#3\" ||\n      msg.text == \"3\" ||\n      msg.text.toUpperCase() == this.variants[2].name.toUpperCase()\n    ) {\n      this.voteFor(2, `${msg.source}${msg.userId}`);\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Add vote for selected variant\n   * @param {Number} num - Variant number\n   * @param {Number|String} user - Unique user id\n   */\n  voteFor (num, user) {\n    if (this.pollEnd) return;\n\n    // If \"Russian hackers\" event is active\n    if (this.Isaac.specialTriggers.triggers.russianHackers.enabled) {\n      num = this.Isaac.specialTriggers.triggers.russianHackers.shuffle[num];\n    }\n\n    // If user already voted\n    if (typeof this.users[user] !== 'undefined' && num != this.users[user]) {\n\n      // Remove previous user vote\n      this.votes[this.users[user]] --;\n\n      // Add new vote\n      this.votes[num] ++;\n\n      // Write new vote\n      this.users[user] = num;\n\n    }\n\n    else if (typeof this.users[user] === 'undefined') {\n      this.votes[num] ++;\n      this.users[user] = num;\n      this.allVotesCount ++;\n    }\n  }\n\n  /**\n   * Return winner from current poll\n   * @returns {Object} Winner\n   */\n  getWinner () {\n\n    if ((this.votes[0] == this.votes[1] && this.votes[1]  == this.votes[2]) || this.allVotesCount == 0) {\n      return this.variants[Math.floor(Math.random() * this.variants.length)];\n    }\n\n    else if (this.votes[0] == this.votes[1] && this.votes[2] < this.votes[0]) {\n      return Math.random() > .5 ? this.variants[1] : this.variants[0]\n    }\n\n    else if (this.votes[1] == this.votes[2] && this.votes[0] < this.votes[1]) {\n      return Math.random() > .5 ? this.variants[2] : this.variants[1]\n    }\n\n    else if (this.votes[0] == this.votes[2] && this.votes[1] < this.votes[0]) {\n      return Math.random() > .5 ? this.variants[2] : this.variants[0]\n    }\n\n    return this.variants[this.votes.indexOf(Math.max(...this.votes))];\n  }\n\n  /**\n   * Returns the percentage for the selected poll option\n   * @param {Number} variant - Selected variant\n   * @returns {Number} Percents on selected variant\n   */\n  getPercents (variant) {\n    if (this.Isaac.settings.hideVotes) {\n      return '-'\n    }\n\n    return this.allVotesCount == 0 ? 0 : Math.round(this.votes[variant]/this.allVotesCount*100);\n  }\n\n  /**\n   * Return poll text\n   * @returns {String} Poll text\n   */\n  getPollText () {\n\n    let text = `#1 ${this.variants[0].name} - ${this.getPercents(0)}%  `;\n    text += `#2 ${this.variants[1].name} - ${this.getPercents(1)}%  `;\n    text += `#3 ${this.variants[2].name} - ${this.getPercents(2)}%`;\n\n    return text;\n\n  }\n\n  freeze() {\n    super.freeze();\n  }\n\n  unfreeze() {\n    super.unfreeze();\n  }\n\n\n}","import Colors from '../../../enums/Colors';\nimport ITMRText from '../../../models/ITMRText'\nimport Isaac from '../../../Isaac'\n\nimport t from '../../../../plugins/locale/translateFunction';\nimport { getRandomElementsFromArr, weightedRandom } from '../../../helperFuncs'\nimport DefaultPoll from '../Base/DefaultPoll';\n\nexport default class EventsPoll extends DefaultPoll {\n  /**\n   * Create new poll for items\n   * @param {Isaac} Isaac - Main game controller\n   */\n  constructor (Isaac, pollTime, delayTime) {\n\n    super(Isaac, pollTime, delayTime);\n\n    // Create events list based on gamemode\n    let preparedEvents = this.Isaac.lists.events.map(event => {\n      return {\n        id: event.id,\n        name: event.name,\n        weight: event.weights[Isaac.gamemode],\n        desc: event.desc,\n        specialTrigger: event.specialTrigger,\n        msgTrigger: event.msgTrigger\n      }\n    });\n\n    // Select 3 random events\n    for(let i = 0; i < 3; i++) {\n      preparedEvents = preparedEvents.filter(event => !this.variants.some(selectedEvent => selectedEvent.id == event.id))\n      this.variants.push(weightedRandom(preparedEvents));\n    }\n\n    this.text.firstline.setText(t('selectEvent', this.Isaac.lang));\n    this.text.secondline.setText(this.getPollText());\n\n  }\n\n  update() {\n\n    super.update();\n\n    // Activate event special trigger\n    if (this.delayTime == 0) {\n      let winner = this.getWinner();\n      if (winner.specialTrigger) {\n        this.Isaac.specialTriggers.activate(winner.specialTrigger);\n      }\n    }\n\n  }\n\n  endPoll() {\n    super.endPoll();\n    let winner = this.getWinner();\n\n    this.text.firstline.setText(`${t('selectedEvent', this.Isaac.lang)} ${winner.name}`);\n    this.text.secondline.setText(winner.desc);\n    this.text.secondline.setColor(Colors.lightGray);\n\n    this.Isaac.services.itmr.sendToGame({\n      m: 'eventAction',\n      d: {\n        id: winner.id\n      }\n    }, true);\n\n  }\n\n  freeze() {\n\n    super.freeze();\n\n    this.Isaac.services.itmr.sendToGame({\n      m: 'removeText',\n      d: [\n        this.text.firstline.name,\n        this.text.secondline.name\n      ]\n    })\n\n  }\n\n  unfreeze() {\n    super.unfreeze();\n  }\n\n\n}","import Colors from '../../../enums/Colors';\nimport ITMRText from '../../../models/ITMRText'\nimport Isaac from '../../../Isaac'\nimport { getNormalName } from '../../../helperFuncs';\n\nimport t from '../../../../plugins/locale/translateFunction';\nimport { getRandomElementsFromArr } from '../../../helperFuncs'\nimport GraphicPoll from '../Base/GraphicPoll';\n\nexport default class TrinketsPoll extends GraphicPoll {\n  /**\n   * Create new poll for trinkets\n   * @param {Isaac} Isaac - Main game controller\n   */\n  constructor (Isaac, pollTime, delayTime) {\n\n    super(Isaac, pollTime, delayTime);\n\n    /** Contains all trinkets in game @type {Array<Object>} */\n    this.trinkets = Isaac.lists.trinkets;\n\n    // Set firstline text\n    this.text.firstline.setText(t('selectTrinket', this.Isaac.lang));\n\n    // Select three trinkets\n    this.variants = getRandomElementsFromArr(this.trinkets, 3);\n\n  }\n\n  endPoll() {\n    super.endPoll();\n\n    let winner = this.getWinner();\n\n    this.text.firstline.setText(`${t('pollGiveResult', this.Isaac.lang)} ${getNormalName(winner.name)}`);\n    this.Isaac.services.itmr.sendToGame({\n      m: 'trinketAction',\n      d: {\n        trinket: winner.id\n      }\n    }, true);\n\n  }\n\n\n}","import Colors from '../../../enums/Colors';\nimport ITMRText from '../../../models/ITMRText'\nimport Isaac from '../../../Isaac'\n\nimport t from '../../../../plugins/locale/translateFunction';\nimport { TextMessage } from '../../../../libs/streamEvents';\nimport BasicPoll from '../Base/BasicPoll';\n\n/**\n * Poll with progress bar\n */\nexport default class PocketsPoll extends BasicPoll {\n  /**\n   * Create new progress bar poll\n   * @param {Isaac} Isaac - Main game controller\n   * @param {Number} pollTime - Time for current poll\n   * @param {Number} delayTime - Time for delay after poll result\n   */\n  constructor(Isaac, pollTime, delayTime) {\n    super(Isaac);\n\n    /** Contains positive votes count @type {Number} */\n    this.positiveVotes = 1;\n\n    /** Contains all votes @type {Number} */\n    this.allVotesCount = 2;\n\n    /** Contains current poll type @type {Object} */\n    this.pollType = null;\n\n    /** Contains voted users @type {Object} */\n    this.users = {};\n\n    /** Time for polling @type {Number} */\n    this.pollTime = pollTime;\n\n    /** Time for delay fter polling ends @type {Number} */\n    this.delayTime = delayTime;\n\n    /** Need for sending progressbar @type {Boolean} */\n    this.isFirstUpdate = true;\n\n    /** This poll needs request player type */\n    this.ready = false;\n\n    /** Remove filler votes @type {Boolean} */\n    this.fillerVotes = true;\n\n    // This poll do not have lines until the end\n    this.text.secondline = null;\n  }\n\n  prepare() {\n    this.Isaac.services.itmr.sendToGame({\n      m: 'getPlayerType'\n    })\n    .then(res => this.setReady(res.out));\n  }\n\n  setReady(playerType) {\n\n    // Prepare array with all progress bar types\n    let types = [\n      {\n        name: \"Pockets\",\n        title: t('selectPockets', this.Isaac.lang),\n        sectors: ['none', 'pill', 'card', 'redcard', 'momcard', 'humanitycard', 'rune', 'blackrune', 'holycard', 'diceshard', 'creditcard']\n      },\n      {\n        name: \"Keys\",\n        title: t('selectKeys', this.Isaac.lang),\n        sectors: ['half', -2, -1, 0, 1, 2, 3, 'gold']\n      },\n      {\n        name: \"Bombs\",\n        title: t('selectBombs', this.Isaac.lang),\n        sectors: ['half', -2, -1, 0, 1, 2, 3, 'gold']\n      },\n\n      {\n        name: \"Coins\",\n        title: t('selectCoins', this.Isaac.lang),\n        sectors: ['half', -2, -1, 0, 1, 2, 5, 10]\n      }\n    ];\n\n    // If player is not Lost or Keeper, add hearts polling\n    if (playerType != 10 && playerType != 14) {\n      types.push({\n        name: \"Hearts\",\n        title: t('selectHearts', this.Isaac.lang),\n        sectors: ['none', 'halfred', 'halfsoul', 'red', 'soul', 'gold', 'black', 'twitch', 'bone', 'container', 'rainbow']\n      });\n    }\n\n    // Select poll type\n    this.pollType = types[Math.floor(Math.random() * types.length)];\n\n    this.ready = true;\n\n  }\n\n  /**\n   * Update current poll state\n   */\n  update() {\n\n    super.update();\n\n    // Show progress bar\n    if (this.isFirstUpdate) {\n      this.Isaac.services.itmr.sendToGame({\n        m: 'addProgressBar',\n        d: {\n          barType: this.pollType.name,\n          title: `${this.Isaac.specialTriggers.getFirstlineModifier()} ${this.pollType.title} (${this.pollTime}${t('s', this.Isaac.lang)})`,\n          min: 0,\n          value: 1,\n          max: 2,\n          sectors: this.pollType.sectors.length\n        }\n      })\n\n      this.isFirstUpdate = false;\n    }\n\n    if (!this.pollEnd) {\n\n      if (this.pollTime > 0) {\n        this.Isaac.services.itmr.sendToGame({\n          m: 'setProgressBar',\n          d: {\n            title: `${this.Isaac.specialTriggers.getFirstlineModifier()} ${this.pollType.title} (${this.pollTime}${t('s', this.Isaac.lang)})`,\n            min: 0,\n            value: this.positiveVotes,\n            max: this.allVotesCount\n          }\n        })\n\n        if (!this.Isaac.isPaused)\n          this.pollTime--;\n      }\n      else {\n        this.endPoll();\n        this.Isaac.prepareNextAction();\n      }\n\n    }\n    else {\n      if (this.delayTime > 0) {\n        if (!this.Isaac.isPaused)\n          this.delayTime--;\n\n        this.text.firstline.setPostfix?.(` (${this.delayTime}${t('s', this.Isaac.lang)})`)\n      }\n      else {\n\n        this.Isaac.services.itmr.sendToGame({\n          m: 'removeText',\n          d: [\n            this.text.firstline.name\n          ]\n        })\n\n        this.text.firstline = null;\n\n        this.Isaac.runNextAction();\n      }\n    }\n\n    let texts = []\n\n    if (this.text.firstline && this.text.firstline.prepare && this.pollEnd) {\n      texts.push(this.text.firstline.prepare())\n    }\n\n    if (texts.length > 0) {\n      this.Isaac.services.itmr.sendToGame({\n        m: 'addText',\n        d: texts\n      });\n    }\n  }\n\n  /**\n   * Called when poll end\n   */\n  endPoll() {\n\n    this.pollEnd = true;\n    this.Isaac.services.itmr.sendToGame({ m: 'removeProgressBar' });\n\n    this.text.firstline.setBlink(Colors.white);\n    this.text.firstline.setPostfix?.(` (${this.delayTime}${t('s', this.Isaac.lang)})`);\n\n    let winner = this.getWinner();\n\n    this.Isaac.services.itmr.sendToGame({\n      m: 'pocketsAction',\n      d: {\n        pickupType: this.pollType.name,\n        value: winner\n      }\n    })\n\n    // Create messages for Pockets and Hearts pollType\n    if (this.pollType.name == \"Pockets\" || this.pollType.name == \"Hearts\") {\n\n      // If winner is none, send basic message\n      if (winner == 'none') {\n        this.text.firstline.setText?.(t('pollNoneResult', this.Isaac.lang));\n      }\n      else {\n\n        // Set text for Hearts and Pockets poll\n        this.text.firstline.setText?.(\n          `${t('pollGiveResult', this.Isaac.lang)}: ${t(winner, this.Isaac.lang)} ${\n\n            // If this is heaerts poll, add \"heart\" word at the end\n            this.pollType.name == \"Hearts\" ?\n            t('heart', this.Isaac.lang)\n            : ''\n          }`\n        );\n\n      }\n    }\n\n    // Create message for all other pollType's\n    else {\n      // If winner is 0, send basic message\n      if (winner == 0) {\n        this.text.firstline.setText?.(t('pollNoneResult', this.Isaac.lang));\n      }\n      else {\n\n        // If winner is equal 'gold', set special message\n        if (winner == 'gold') {\n          if (this.pollType.name == \"Keys\")\n            this.text.firstline.setText?.(`${t('pollGiveResult', this.Isaac.lang)}: ${t('goldenkey', this.Isaac.lang)}`);\n          else\n            this.text.firstline.setText?.(`${t('pollGiveResult', this.Isaac.lang)}: ${t('goldenbomb', this.Isaac.lang)}`);\n        }\n\n        // If winner is equal 'half', set special message\n        else if (winner == 'half') {\n          if (this.pollType.name == \"Keys\")\n            this.text.firstline.setText?.(`${t('pollRemoveResult', this.Isaac.lang)}: ${t('halfkeys', this.Isaac.lang)}`);\n          else if (this.pollType.name == \"Bombs\")\n            this.text.firstline.setText?.(`${t('pollRemoveResult', this.Isaac.lang)}: ${t('halfbombs', this.Isaac.lang)}`);\n          else if (this.pollType.name == \"Coins\")\n            this.text.firstline.setText?.(`${t('pollRemoveResult', this.Isaac.lang)}: ${t('halfcoins', this.Isaac.lang)}`);\n        }\n\n        // If winner more than zero, set message from \"pollGiveResult\" string\n        else if (winner > 0) {\n          this.text.firstline.setText?.(\n            `${t('pollGiveResult', this.Isaac.lang)}: ${winner} ${\n              t(\n                winner == 1 || winner == -1 ? this.pollType.name.toLowerCase().substr(0, this.pollType.name.length - 1) : this.pollType.name.toLowerCase(),\n                this.Isaac.lang\n              )\n            }`\n          )\n        }\n        // If winner smaller than zero, set message from \"pollRemoveResult\" string\n        else {\n          this.text.firstline.setText?.(\n            `${t('pollRemoveResult', this.Isaac.lang)}: ${-1 * winner} ${t(this.pollType.name.toLowerCase(), this.Isaac.lang)}`\n          )\n        }\n\n      }\n    }\n\n\n\n  }\n\n  handleMessaage(msg) {\n\n    // Check if this is positive\n    if (\n      msg.text.toUpperCase() == \"MORE\" ||\n      msg.text.toUpperCase() == \"БОЛЬШЕ\"\n    ) {\n      this.voteFor(true, `${msg.source}${msg.userId}`);\n      return false;\n    }\n\n    // Or negative\n    else if (\n      msg.text.toUpperCase() == \"LESS\" ||\n      msg.text.toUpperCase() == \"МЕНЬШЕ\"\n    ) {\n      this.voteFor(false, `${msg.source}${msg.userId}`);\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Add vote for selected variant\n   * @param {Boolen} positive - Variant number\n   * @param {Number|String} user - Unique user id\n   */\n  voteFor(positive, user) {\n    if (this.pollEnd) return;\n\n    // If \"Russian hackers\" event is active, swap votes\n    if (this.Isaac.specialTriggers.triggers.russianHackers.enabled) {\n      positive = !positive;\n    }\n\n    // If user already voted\n    if (typeof this.users[user] !== 'undefined' && positive != this.users[user]) {\n\n      if (positive) {\n        this.positiveVotes ++;\n      }\n      else {\n        this.positiveVotes --;\n      }\n\n      // Write new vote\n      this.users[user] = positive;\n\n    }\n\n    else if (typeof this.users[user] === 'undefined') {\n      if (positive) {\n        this.positiveVotes ++;\n      }\n\n      this.users[user] = positive;\n      this.allVotesCount++;\n    }\n\n    if (this.fillerVotes) {\n      this.positiveVotes--;\n      this.allVotesCount -= 2;\n      this.fillerVotes = false;\n    }\n  }\n\n  /**\n   * Return winner from current poll\n   * @returns {String|Number} Winner\n   */\n  getWinner() {\n    if (this.positiveVotes == 0) {\n      return this.pollType.sectors[0];\n    }\n    else {\n      return this.pollType.sectors[Math.ceil(this.positiveVotes / this.allVotesCount * this.pollType.sectors.length) - 1];\n    }\n  }\n\n  freeze() {\n    super.freeze();\n\n    if (!this.pollEnd) {\n      this.Isaac.services.itmr.sendToGame({ m: 'removeProgressBar' });\n    }\n    else {\n      this.Isaac.services.itmr.sendToGame({\n        m: 'removeText',\n        d: [\n          this.text.firstline.name\n        ]\n      })\n    }\n\n  }\n\n  unfreeze() {\n    super.unfreeze();\n\n    if (!this.pollEnd) {\n      this.Isaac.services.itmr.sendToGame({\n        m: 'addProgressBar',\n        d: {\n          barType: this.pollType.name,\n          title: `${this.Isaac.specialTriggers.getFirstlineModifier()} ${this.pollType.title} (${this.pollTime}${t('s', this.Isaac.lang)})`,\n          min: 0,\n          value: 1,\n          max: 2,\n          sectors: this.pollType.sectors.length\n        }\n      })\n    }\n  }\n\n\n}","import Isaac from '../Isaac'\nimport ITMRText from '../models/ITMRText';\n\nimport t from '../../plugins/locale/translateFunction';\n\nexport default class Message {\n\n  /**\n   * Create new Message for Isaac Twitch Mod\n   * @param {Isaac} Isaac - Main game controller\n   * @param {ITMRText} firstline - First text line\n   * @param {ITMRText} secondline - Second text line\n   * @param {Number} time - Time for message\n   */\n  constructor (Isaac, firstline, secondline, time) {\n\n    this.Isaac = Isaac;\n    this.firstline = firstline;\n    this.secondline = secondline;\n    this.time = time;\n\n    // Instantly prepare next action, because Message duration is short\n    this.Isaac.prepareNextAction()\n\n  }\n\n  /**\n   * Update current message state\n   */\n  update() {\n    this.firstline.setPostfix(` (${this.time}${t('s', this.Isaac.lang)})`);\n\n    if (this.time > 0) {\n      let texts = [];\n\n      if (this.firstline)\n        texts.push(this.firstline.prepare());\n\n      if (this.secondline)\n        texts.push(this.secondline.prepare());\n\n      this.Isaac.services.itmr.sendToGame({\n        m: 'addText',\n        d: texts\n      });\n\n      if (!this.Isaac.isPaused)\n        this.time--;\n    }\n    else {\n\n      let textsForRemove = []\n\n      if (this.firstline) {\n        textsForRemove.push(this.firstline.name)\n      }\n\n      if (this.secondline) {\n        textsForRemove.push(this.secondline.name)\n      }\n\n      this.Isaac.services.itmr.sendToGame({\n        m: 'removeText',\n        d: textsForRemove\n      });\n\n      this.Isaac.runNextAction();\n    }\n\n  }\n\n  /**\n   * Freeze current message\n   */\n  freeze () {\n    let textsForRemove = []\n\n    if (this.firstline) {\n      textsForRemove.push(this.firstline.name)\n    }\n\n    if (this.secondline) {\n      textsForRemove.push(this.secondline.name)\n    }\n\n    this.Isaac.services.itmr.sendToGame({\n      m: 'removeText',\n      d: textsForRemove\n    });\n  }\n\n}","import { getRandomElementsFromArr } from '../helperFuncs'\n\nexport default class SpecialTriggers {\n\n  constructor () {\n\n    this.triggers = {\n\n      russianHackers: {\n        enabled: false,\n        shuffle: [],\n        modifier: '[H4CK3D] '\n      }\n\n    }\n\n  }\n\n  activate(name) {\n\n    this.triggers[name].enabled = true;\n\n    switch (name) {\n\n      case 'russianHackers':\n        this.triggers.russianHackers.shuffle = getRandomElementsFromArr([0,1,2], 3);\n        break;\n\n    }\n\n  }\n\n  stopAll() {\n    for (const [key, value] of Object.entries(this.triggers)) {\n      value.enabled = false;\n    }\n  }\n\n  getFirstlineModifier() {\n    let modifier = '';\n    for (const [key, value] of Object.entries(this.triggers)) {\n      modifier += value.enabled ? value.modifier : ''\n    }\n\n    return modifier;\n  }\n\n}","import TextMessage from '../../libs/streamEvents'\nimport Isaac from '../Isaac';\n\nexport default class SpecialMessageHandler {\n\n  /**\n   *\n   * @param {Isaac} Isaac - Main game controller\n   */\n  constructor (Isaac) {\n\n    this.Isaac = Isaac;\n\n    this.state = {\n      movePlayer: false,\n      viewersAttack: false,\n      heavyRain: false,\n    }\n\n    this.sended = 0;\n\n  }\n\n  /**\n   * Handle current message and check special handlers\n   * @param {TextMessage} message - Chat message\n   * @returns {Boolean} Show Message in chat or not\n   */\n  handleMessage (message) {\n\n    let showInChat = true;\n\n    if (this.state.movePlayer) {\n      let res = this.movePlayer(message);\n      if (!res) {\n        showInChat = false\n      }\n    }\n\n    if (this.state.viewersAttack) {\n      let res = this.viewersAttack(message);\n      if (!res) {\n        showInChat = false\n      }\n    }\n\n    if (this.state.heavyRain) {\n      let res = this.heavyRain(message);\n      if (!res) {\n        showInChat = false\n      }\n    }\n\n    return showInChat;\n\n  }\n\n  resetSended () {\n    this.sended = 0;\n  }\n\n  disableAll () {\n    this.state.movePlayer = false;\n    this.state.viewersAttack = false;\n    this.state.heavyRain = false;\n  }\n\n  /**\n   * Handle viewersAttack\n   * @param {TextMessage} message - Chat message\n   * @returns {Boolean} Show Message in chat or not\n   */\n  viewersAttack(message) {\n\n    let text = message.text.toUpperCase();\n\n    if (text == 'PLAYER' || text == 'ИГРОК') {\n      this.sendToGame({ m: 'viewersAttack', d: 'p' })\n      return false;\n    }\n    else if (text == 'ENEMY' || text == 'ВРАГ') {\n      this.sendToGame({ m: 'viewersAttack', d: 'e' })\n      return false;\n    }\n\n    return true;\n\n  }\n\n  /**\n   * Handle movePlayer\n   * @param {TextMessage} message - Chat message\n   * @returns {Boolean} Show Message in chat or not\n   */\n  movePlayer(message) {\n\n    let text = message.text.toUpperCase();\n\n    if (text == 'LEFT' || text == 'ВЛЕВО') {\n      this.sendToGame({ m: 'movePlayer', d: 'l' })\n      return false;\n    }\n    else if (text == 'RIGHT' || text == 'ВПРАВО') {\n      this.sendToGame({ m: 'movePlayer', d: 'r' })\n      return false;\n    }\n    else if (text == 'UP' || text == 'ВВЕРХ') {\n      this.sendToGame({ m: 'movePlayer', d: 'u' })\n      return false;\n    }\n    else if (text == 'DOWN' || text == 'ВНИЗ') {\n      this.sendToGame({ m: 'movePlayer', d: 'd' })\n      return false;\n    }\n\n    return true;\n\n  }\n\n  heavyRain(message) {\n    let text = message.text.toUpperCase();\n\n    if (text == 'X' || text == 'Х') {\n      this.sendToGame({ m: 'jason'})\n      return false;\n    }\n  }\n\n  sendToGame (object) {\n\n    // Restrict to 30 messages per second\n    if (this.sended > 30)\n      return;\n\n    this.Isaac.services.itmr.sendToGame(object, false, 10)\n\n  }\n\n\n}","import t from '../plugins/locale/translateFunction';\nimport Colors from './enums/Colors'\nimport {ITMR_GAMEMODES} from './enums/Gamemodes'\n\nimport ITMRText from './models/ITMRText'\n\nimport {getRandomElementsFromArr, weightedRandom, randString} from './helperFuncs'\n\nimport streamers from './data/streamers'\n\nimport TwitchConnect from '../libs/twitchConnect'\nimport YoutubeConnect from '../libs/youtubeConnect'\nimport IsaacConnect from './isaacConnect'\n\nimport BasicPoll from './classes/Polls/Base/BasicPoll'\nimport ItemsPoll from './classes/Polls/Graphic/ItemsPoll'\nimport EventsPoll from './classes/Polls/Text/EventsPoll';\nimport TrinketsPoll from './classes/Polls/Graphic/TrinketsPoll';\nimport PocketsPoll from './classes/Polls/Bar/PocketsPoll';\n\nimport Message from './classes/Message'\nimport SpecialTriggers from './classes/SpecialTriggers';\n\nimport { DonateMessage, Subscriber, TextMessage } from '../libs/streamEvents';\nimport SpecialMessageHandler from './classes/SpecialMessageHandler';\n\n/**\n * Main game controller\n **/\nexport default class Isaac {\n\n  /**\n   * Create new Isaac controller\n   * @param {Object} services - Twitch, Youtube and ITMR services\n   * @param {TwitchConnect} services.twitch - Twitch service\n   * @param {YoutubeConnect} services.youtube - Youtube service\n   * @param {IsaacConnect} services.itmr - Isaac service\n   * @param {Object} settings - Mod settings\n   * @param {String} lang - Language code\n   * @param {Number} gamemode - Selected gamemode\n   */\n  constructor (services, settings, lang = 'en', gamemode = ITMR_GAMEMODES.NORMAL) {\n\n    this.services = services;       // Twitch, Youtube and Isaac connectors\n    this.settings = settings;       // Current settings\n    this.lang = lang;               // Current language\n    this.gamemode = gamemode;       // Current gamemode\n\n    this.lists = {};                // All items, trinkets, events, etc.\n    this.activeUsers = {};          // All user from chat, using for bossnames\n    this.ticksCount = 0;            // Contains count of ticks\n\n    /** Contains chat window @type {Window} */\n    this.chatWindow = null;\n\n    /** Main setInterval id @type {Number} */\n    this.timer = null;\n\n    // ------------ Actions seciotn ------------ //\n\n    /** Active poll or text object @type {BasicPoll|Message} */\n    this.currentAction = null;\n\n    /** Next poll or text object @type {BasicPoll|Message} */\n    this.nextAction = null;\n\n    /** Interrupted poll or text object @type {Array<BasicPoll|Message>} */\n    this.freezedActions = [];\n\n    /** Contains special handlers for polling modification @type {SepcialTriggers} */\n    this.specialTriggers = new SpecialTriggers();\n\n    /** Contains special handlers for message events @type {SepcialTriggers} */\n    this.specialMessageHandler = new SpecialMessageHandler(this);\n\n    /** Game state @type {Boolean} */\n    this.isPaused = false;\n\n    // Bind events for Twitch\n    if (this.services.twitch) {\n      this.services.twitch.events.onMessage = this.onMessage.bind(this);\n      this.services.twitch.events.onSub = this.onSubscriber.bind(this);\n      this.services.twitch.events.onBits = this.onDonate.bind(this);\n    }\n\n    // Bind events for Youtube\n    if (this.services.youtube) {\n      this.services.youtube.events.onMessage = this.onMessage.bind(this);\n      this.services.youtube.events.onSub = this.onSubscriber.bind(this);\n      this.services.youtube.events.onSuperchat = this.onDonate.bind(this);\n    }\n\n    // Send settings on reconnect and restore additional graphics for polls\n    this.services.itmr.events.onReconnect = () => {\n      this.sendSettings();\n      console.log(this.currentAction?.isFirstUpdate === false);\n      if (this.currentAction && this.currentAction?.isFirstUpdate === false) {\n        this.currentAction.isFirstUpdate = true;\n      }\n    }\n\n    // Add output handlers\n    this.services.itmr.addHandler('changeGameState', ({paused}) => {\n      this.isPaused = paused;\n    });\n\n    this.services.itmr.addHandler('acceptPoll', () => {\n      this.acceptPoll();\n    });\n\n    this.services.itmr.addHandler('skipPoll', () => {\n      this.skipPoll();\n    });\n\n    this.services.itmr.addHandler('newRun', () => {\n      this.start();\n    });\n\n    this.services.itmr.addHandler('toggleSpecialHandler', ({name, enable}) => {\n      this.services.itmr._log(`Handler ${name} set to ${enable}`)\n      this.specialMessageHandler.state[name] = enable;\n    });\n  }\n\n  /**\n   * Launch Isaac on Twitch\n   */\n  start () {\n    if (this.timer) {\n      clearInterval(this.timer);\n      this.freezedActions = [];\n      this.currentAction = null;\n      this.nextAction = null;\n      this.specialTriggers.stopAll();\n      this.specialMessageHandler.disableAll();\n    }\n\n    // Clear all UI elements\n    this.services.itmr.clearAll();\n\n    this.timer = setInterval(() => this.tick(), 1000);\n\n    // Exchange startup data\n    this.sendSettings()\n    .then (() => {\n      this.loadData()\n      .then(() => {\n\n        // Create message about starting poll\n        this.currentAction = new Message(\n          this,\n          new ITMRText(\n            'msg_firstline',\n            `${t('gameSetupDone', this.lang)}`,\n            this.settings.textpos.l1,\n            Colors.yellow\n          ), null, 5\n        )\n\n        console.log(this);\n      });\n\n    });\n\n    // Give personal trinket\n    streamers.forEach(streamer => {\n\n      if (\n        streamer.twitch === this.services?.twitch?.channel.toLowerCase()\n        || streamer.youtube === this.services?.youtube?.channel\n      ) {\n        this.services.itmr.sendToGame({\n          m: 'gift',\n          d: {\n            trinket: streamer.trinket\n          }\n        }, true);\n      }\n\n    })\n\n  }\n\n  /**\n   * Timer loop, call every second\n   */\n  tick () {\n    this.ticksCount ++;\n    this.services.itmr.checkOutput();\n\n    // Update user nicknames\n    if (this.ticksCount % 10 == 0) {\n\n      let users = Object.keys(this.activeUsers)\n\n      this.services.itmr.sendToGame({\n        m: 'randomNames',\n        d: users.length > 20 ?\n          getRandomElementsFromArr(users, 20)\n          : users\n      })\n    }\n\n    if (!this.services.itmr.isConnected) return;\n\n    this.currentAction.update?.();\n  }\n\n  /**\n   * Change poll position in game\n   * @param {String} pos - Position direction\n   */\n  changeTextPos(pos) {\n\n    console.log(this.settings.textpos)\n\n    switch (pos) {\n      case 'up':\n        this.settings.textpos.l1.Y -= 5;\n        this.settings.textpos.l2.Y -= 5;\n        break;\n\n      case 'down':\n        this.settings.textpos.l1.Y += 5;\n        this.settings.textpos.l2.Y += 5;\n        break;\n\n      case 'left':\n        this.settings.textpos.l1.X -= 5;\n        this.settings.textpos.l2.X -= 5;\n        break;\n\n      case 'right':\n        this.settings.textpos.l1.X += 5;\n        this.settings.textpos.l2.X += 5;\n        break;\n\n      case 'reset':\n        this.settings.textpos = {\n          l1: { X: 16, Y: 190 },\n          l2: { X: 16, Y: 215 }\n        }\n        break;\n    }\n\n    this.services.itmr.sendToGame({\n      m: 'textpos',\n      d: this.settings.textpos\n    }, true);\n\n    console.log(this.settings.textpos)\n\n    return this.settings.textpos;\n\n  }\n\n  /**\n   * Call on new message in chat\n   * @param {TextMessage} msg - Message from chat\n   */\n  onMessage (msg) {\n\n    let showInChat = true;\n    if (!this.activeUsers[msg.userName]) {\n      this.activeUsers[msg.userName] = true\n    }\n\n    // Check poll in message\n    if (this.currentAction?.handleMessaage) {\n      let res = this.currentAction?.handleMessaage?.(msg);\n      if (res === false) {\n        showInChat = false;\n      }\n    }\n\n    // Check special actions in message\n    let res = this.specialMessageHandler.handleMessage(msg);\n    if (res === false) {\n      showInChat = false\n    }\n\n\n    // Send message data to chat\n    if (this.chatWindow && !this.chatWindow.closed && showInChat) {\n      console.log('Send message');\n      this.chatWindow.postMessage?.({\n        chatMessage: {\n          type: 'basic',\n          user: msg.userName,\n          text: msg.text,\n          source: msg.source\n        }\n      }, '*');\n    }\n  }\n\n  /**\n   * Call on new subscriber\n   * @param {Subscriber} subscriber - Subscriber object\n   */\n  onSubscriber (subscriber) {\n\n    if (!this.settings.subsAndBits.subs)\n      return;\n\n    this.immediateAction(new Message(this, new ITMRText(\n      `sub_${randString(8)}`,\n      `${t('newSub', this.lang)} - ${subscriber.userName}`,\n      this.settings.textpos.l1,\n      Colors.white,\n      Colors.yellow\n    ), null, 3));\n\n    this.services.itmr.sendToGame({\n      m: 'subscriberAction',\n      d: {name: subscriber.userName, time: this.settings.subtime}\n    });\n\n\n    // Send subscribe data to chat\n    if (this.chatWindow && !this.chatWindow.closed) {\n      this.chatWindow.postMessage?.({\n        chatMessage: {\n          type: 'subscribe',\n          user: subscriber.userName,\n          source: subscriber.source\n        }\n      }, '*');\n    }\n\n  }\n\n  /**\n   * Call on new bits or superchat\n   * @param {DonateMessage} donate - Subscriber object\n   */\n  onDonate(donate) {\n\n    if (!this.settings.subsAndBits.bits && donate.source == 'tw')\n      return;\n    else if (!this.settings.subsAndBits.superchat && donate.source == 'yt')\n      return;\n\n    this.immediateAction(new Message(this, new ITMRText(\n      `sub_${randString(8)}`,\n      donate.source == 'tw' ? t('newBits', this.lang) : t('newSuperchat', this.lang),\n      this.settings.textpos.l1,\n      Colors.white,\n      Colors.yellow\n    ), null, 3));\n\n    this.services.itmr.sendToGame({\n      m: 'bitsAction',\n      d: { amount: donate.amount, type: donate.type }\n    });\n\n  }\n\n  /**\n   * Launch action immediately, freeze preview action\n   * @param {BasicPoll|Message} action - Action for calling immediately\n   */\n  immediateAction(action) {\n    // Freeze current action\n    this.currentAction.freeze?.();\n\n    if(!(this.currentAction instanceof Message)) {\n      this.freezedActions.push(this.currentAction);\n    }\n\n    this.currentAction = action;\n\n  }\n\n  /**\n   * Prepare next action\n   */\n  prepareNextAction() {\n\n    if (this.freezedActions.length > 0) {\n      return;\n    }\n\n    this.specialTriggers.stopAll();\n\n    // Select poll based on weights\n    let selectedPoll = weightedRandom([\n      { name: 'event', weight: this.settings.chances.events },\n      { name: 'item', weight: this.settings.chances.items },\n      { name: 'trinket', weight: this.settings.chances.trinkets },\n      { name: 'other', weight: this.settings.chances.other },\n    ]);\n\n\n    switch (selectedPoll.name) {\n      case 'event':\n        this.nextAction = new EventsPoll(this, this.settings.timings.vote, this.settings.timings.delay);\n        break;\n\n      case 'item':\n        this.nextAction = new ItemsPoll(this, this.settings.timings.vote, this.settings.timings.delay);\n        break;\n\n      case 'trinket':\n        this.nextAction = new TrinketsPoll(this, this.settings.timings.vote, this.settings.timings.delay);\n        break;\n\n      case 'other':\n        this.nextAction = new PocketsPoll(this, this.settings.timings.vote, this.settings.timings.delay);\n        break;\n    }\n\n    this.nextAction.prepare?.();\n\n  }\n\n  runNextAction() {\n\n    // If contains freezed action, launch it\n    if (this.freezedActions.length > 0) {\n      this.currentAction = this.freezedActions.pop();\n      return;\n    }\n\n    this.currentAction = this.nextAction;\n    this.nextAction = null;\n    this.currentAction?.text?.firstline?.setPrefix?.(this.specialTriggers.getFirstlineModifier());\n  }\n\n  // Give gift for available streamers\n  giveGift () {\n\n  }\n\n  // Skip current poll\n  skipPoll () {\n\n    this.currentAction?.freeze?.();\n    this.currentAction = new Message(this, new ITMRText(\n      'skipvote',\n      t('skipCurrentPoll', this.lang),\n      this.settings.textpos.l1,\n      Colors.red,\n      Colors.yellow\n    ));\n\n  }\n\n  // Accept current poll\n  acceptPoll() {\n\n    if (this.currentAction && this.currentAction.pollTime)\n      this.currentAction.pollTime = 0;\n\n  }\n\n  // Send settings to game\n  sendSettings () {\n\n    return this.services.itmr.sendToGame({\n      m: 'settings',\n      d: {\n        textpos: this.settings.textpos,\n        subtime: this.settings.subtime,\n        lang: this.lang\n      }\n    }, true);\n\n  }\n\n  // Load all items, trinkets and events from game\n  loadData () {\n\n    this.lists = {                  // List of all polling types\n      items: [],\n      trinkets: [],\n      events: [],\n    }\n\n    // Load items from mod\n    return this.services.itmr.sendToGame({\n      m: 'getItems'\n    }, true)\n    .then (res => {\n\n      this.lists.items.push(...res.out.active);\n      this.lists.items.push(...res.out.passive);\n      this.lists.items.push(...res.out.familiars);\n      this.lists.trinkets.push(...res.out.trinkets);\n      this.lists.events.push(...res.out.events);\n\n      console.log(res.out);\n\n    });\n  }\n\n}","<template>\n  <div class=\"gamemodeScreen\">\n    <h1>{{\"gamemode\" | t($store.state.locale)}}</h1>\n\n    <div class=\"panel-container\">\n      <div class=\"panel hoverable\" @click=\"start(0)\">\n        <h2>{{\"easy\" | t($store.state.locale)}}</h2>\n        <p>{{\"easyDesc\" | t($store.state.locale)}}</p>\n        <img :src=\"getImgUrl('easyImg')\"/>\n      </div>\n\n      <div class=\"panel hoverable\" @click=\"start(1)\">\n        <h2>{{\"default\" | t($store.state.locale)}}</h2>\n        <p>{{\"defaultDesc\" | t($store.state.locale)}}</p>\n        <img :src=\"getImgUrl('defaultImg')\"/>\n      </div>\n\n      <div class=\"panel hoverable\" @click=\"start(2)\">\n        <h2>{{\"crazy\" | t($store.state.locale)}}</h2>\n        <p>{{\"crazyDesc\" | t($store.state.locale)}}</p>\n        <img :src=\"getImgUrl('crazyImg')\"/>\n      </div>\n\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport BigButton from '../components/BigButton.vue';\nimport Isaac from '../isaac/Isaac'\n\nexport default {\n  name: 'gamemodeScreen',\n  components: {\n    BigButton\n  },\n\n  mounted () {\n\n    if (!this.$services.itmr) {\n      this.$router.push('/');\n      return;\n    }\n\n  },\n\n  methods: {\n    start (gamemode) {\n      this.$root.isaac = new Isaac(this.$services, this.$store.state.settings, this.$store.state.locale, gamemode);\n      this.$root.isaac.start();\n      this.$router.push('/game');\n\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n\n.simple-input {\n  background: none;\n  outline: none;\n  border: none;\n  border-bottom: 3px solid #343434;\n  font-size: inherit;\n  font-family: inherit;\n  color: #343434;\n  text-align: center;\n  max-width: 90px;\n  margin-bottom: 20px;\n}\n\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Gamemode.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Gamemode.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Gamemode.vue?vue&type=template&id=792c237c&\"\nimport script from \"./Gamemode.vue?vue&type=script&lang=js&\"\nexport * from \"./Gamemode.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Gamemode.vue?vue&type=style&index=0&id=792c237c&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var classof = require('../internals/classof');\n\nvar $String = String;\n\nmodule.exports = function (argument) {\n  if (classof(argument) === 'Symbol') throw TypeError('Cannot convert a Symbol value to a string');\n  return $String(argument);\n};\n","/**\n * Basic text message from Twitch or Youtube chat\n */\nexport class TextMessage {\n\n  /**\n   *\n   * @param {Number|String} userId - Unique user id\n   * @param {String} userName - Displayed user name\n   * @param {String} text - Message text\n   * @param {String} source - Source of message, \"yt\" for YouTube, \"tw\" fro Twitch\n   */\n  constructor(userId, userName, text, source) {\n    this.userId = userId;\n    this.userName = userName;\n    this.text = text.trim();\n    this.source = source;\n  }\n\n}\n\n/**\n * Bits message for Twitch\n * Superchat message for Youtube\n */\nexport class DonateMessage {\n\n  /**\n   *\n   * @param {Number|String} userId - Unique user id\n   * @param {String} userName - Displayed user name\n   * @param {Number} amount - Amount of bits\n   * @param {Number} type - Type of bits\n   * @param {String} source - Source of message, \"yt\" for YouTube, \"tw\" fro Twitch\n   */\n  constructor (userId, userName, amount, type, source) {\n    this.userId = userId;\n    this.userName = userName;\n    this.amount = amount;\n    this.type = type;\n    this.source = source;\n  }\n}\n\n/**\n * New subscriber on Twitch\n * New sponsor on YouTube\n */\nexport class Subscriber {\n\n  /**\n   *\n   * @param {Number|String} userId - Unique user id\n   * @param {String} userName - Displayed user name\n   * @param {String} source - Source of message, \"yt\" for YouTube, \"tw\" fro Twitch\n   */\n  constructor (userId, userName, source) {\n    this.userId = userId;\n    this.userName = userName;\n    this.source = source;\n  }\n}\n\n/**\n * New followers\n * Currently not using\n */\nexport class Follower {\n  constructor (userId, userName, source) {\n    this.userId = userId;\n    this.userName = userName;\n    this.source = source;\n  }\n}","var isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    isCallable(NewTarget = dummy.constructor) &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","import ITMRColor from \"./ITMRColor\";\nimport ITMRVector from \"./ITMRVector\";\n\nexport default class ITMRText {\n\n  /**\n   * Create new Text for Isaac On Twitch Mod\n   * @param {String} name - Text id\n   * @param {String} value - Text value\n   * @param {ITMRVector} pos - Text position\n   * @param {ITMRColor} color - Text color\n   * @param {ITMRColor} blink - Text blink color\n   * @param {Number} size - Text size\n   * @param {Boolean} isCenter - Set text to center\n   * @param {String} postfix - Text postfix, added to the end of text\n   */\n  constructor (name, value, pos = null, color = null, blink = null, size = null, isCenter = null, postfix = null, prefix = null) {\n\n    this.name = name;\n    this.value = value;\n    this.pos = pos;\n    this.color = color;\n    this.blink = blink;\n    this.size = size;\n    this.isCenter = isCenter;\n    this.postfix = postfix;\n    this.prefix = prefix;\n\n  }\n\n  /**\n   * Change text position\n   * @param {ITMRVector} vector - Vector with new position\n   */\n  setPos (vector) {\n    this.pos = vector\n  }\n\n  /**\n   * Change text value\n   * @param {String} text - New text value\n   */\n  setText (text) {\n    this.value = text;\n  }\n\n  /**\n   * Change text postfix\n   * @param {String} postfix - New text postfix\n   */\n  setPostfix (postfix) {\n    this.postfix = postfix;\n  }\n\n  /**\n   * Change text prefix\n   * @param {String} prefix - New text prefix\n   */\n  setPrefix(prefix) {\n    this.prefix = prefix;\n  }\n\n  /**\n   * Change text color\n   * @param {ITMRColor|null} color - Text color\n   */\n  setColor (color) {\n    this.color = color\n  }\n\n  /**\n   * Change text blink color\n   * @param {ITMRColor|null} color - Blink color\n   */\n  setBlink (color) {\n    this.blink = color\n  }\n\n  /**\n   * Remove text blinking\n   */\n  removeBlink () {\n    this.blink = null;\n  }\n\n  /**\n   * Change text size\n   * @param {Number} size - New text size\n   */\n  setSize (size) {\n    this.size = size;\n  }\n\n  /**\n   * Change text centering\n   * @param {Boolean} center - Set text to center\n   */\n  setCenter (center) {\n    this.isCenter = center;\n  }\n\n  /**\n   * Return only not null fields for decreasing data size\n   * @returns {Object}\n   */\n  prepare () {\n\n    let obj = {};\n    obj['name'] = this.name;\n    obj['value'] = this.postfix ? `${this.value} ${this.postfix}` : this.value;\n    obj['value'] = this.prefix ? `${this.prefix} ${obj['value']}` : obj['value'];\n    if (this.pos) obj['pos'] = this.pos;\n    if (this.color) obj['color'] = this.color;\n    if (this.blink) obj['blink'] = this.blink;\n    if (this.size) obj['size'] = this.size;\n    if (this.isCenter) obj['isCenter'] = this.isCenter;\n\n    return obj;\n  }\n\n  /**\n   * Check if two texts is equals\n   * @param {ITMRText} text - Text for checking\n   * @returns {Boolean}\n   */\n  equals (text) {\n\n    if (text == null) return false;\n    let curText = this.prepare();\n\n    return curText?.name == text?.name &&\n      curText?.value == text?.value &&\n      curText?.pos == text?.pos &&\n      curText?.color == text?.color &&\n      curText?.blink == text?.blink &&\n      curText?.size == text?.size &&\n      curText?.postfix == text?.postfix &&\n      curText?.prefix == text?.prefix &&\n      curText?.isCenter == text?.isCenter;\n\n  }\n\n}","var isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\n// `InstallErrorCause` abstract operation\n// https://tc39.es/proposal-error-cause/#sec-errorobjects-install-error-cause\nmodule.exports = function (O, options) {\n  if (isObject(options) && 'cause' in options) {\n    createNonEnumerableProperty(O, 'cause', options.cause);\n  }\n};\n","var defineProperty = require('../internals/object-define-property').f;\n\nmodule.exports = function (Target, Source, key) {\n  key in Target || defineProperty(Target, key, {\n    configurable: true,\n    get: function () { return Source[key]; },\n    set: function (it) { Source[key] = it; }\n  });\n};\n","var fails = require('../internals/fails');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = !fails(function () {\n  var error = Error('a');\n  if (!('stack' in error)) return true;\n  // eslint-disable-next-line es/no-object-defineproperty -- safe\n  Object.defineProperty(error, 'stack', createPropertyDescriptor(1, 7));\n  return error.stack !== 7;\n});\n","import {TextMessage, DonateMessage, Subscriber} from './streamEvents';\n\nexport default class YoutubeConnect {\n\n  /**\n   * Create new chat object for Youtube\n   * @param {String} streamURLString - URL for YouTube stream\n   */\n  constructor (streamURLString) {\n    this.apikey = \"wgnn-wBx-_VT5Nu996o8ylc-t786swbRBySazIA\".split('').reverse().join('');\n    this.streamURL = new URL(streamURLString);\n    this.lastMessagesId = [];\n    this.vuewersCount = 0;\n    this.channel = null;\n    this.nextPageToken = null;\n\n    this.consoleStyle = 'background-color: #FF0000; color: #FFFFFF; border-radius: 100px;padding: 1px 4px;';\n\n    if (this.streamURL.hostname == \"www.youtube.com\" || this.streamURL.hostname == \"youtube.com\") {\n      this.streamId = this.streamURL.searchParams.get('v');\n    }\n    else {\n      this.streamId = this.streamURL.pathname.substr(1);\n    }\n\n    this.events = {\n      onMessage: () => {},\n      onSub: () => {},\n      onFollower: () => {},\n      onSuperchat: () => {},\n\n      onConnect: () => {},\n      onDisconnect: () => {},\n      onError:  () => {}\n    }\n  }\n\n  connect () {\n    fetch(\n      \"https://www.googleapis.com/youtube/v3/videos?id=\" + this.streamId + \"&part=snippet,liveStreamingDetails&key=\" + this.apikey\n    )\n    .then(res => {\n      return res.json()\n    })\n    .then (res => {\n      this.chatId = res.items[0].liveStreamingDetails.activeLiveChatId;\n      this.channel = res.items[0].snippet.channelId;\n      this._updateChat();\n      this.updTimer = setInterval(this._updateChat.bind(this), 5000);\n\n      this._log(\"Connected to \" + this.chatId);\n      this._log(\"Channel id: \" + this.channel);\n    })\n    .catch (err => {\n      this._signal('onError', err);\n    })\n  }\n\n  disconnect () {\n\n    clearInterval(this.updTimer);\n    this._signal('onDisconnect', null);\n\n  }\n\n  updateViewers() {\n\n    return fetch(\n      `https://www.googleapis.com/youtube/v3/videos?part=liveStreamingDetails&id=${this.streamId}&fields=items%2FliveStreamingDetails&key=${this.apikey}`\n      )\n      .then(res => res.json())\n      .then(res => {\n        if (res.items?.length > 0) {\n          this.viewersCount = res.items[0].liveStreamingDetails.concurrentViewers\n        }\n      })\n\n  }\n\n  _updateChat () {\n    fetch(\n      \"https://www.googleapis.com/youtube/v3/liveChat/messages?liveChatId=\" + this.chatId + \"&part=id,snippet,authorDetails&maxResults=100&key=\" + this.apikey +\n      (this.nextPageToken ? '&nextPageToken=' + this.nextPageToken : '')\n    )\n    .then (res => {\n      return res.json();\n    })\n    .then (res => {\n      res.items.forEach(msg => {\n        if (res?.nextPageToken) {\n          this.nextPageToken = res.nextPageToken;\n        }\n\n        // If message exists, just skip it\n        if (this.lastMessagesId.includes(msg.id)) return;\n\n        // Check array size and clear it if need\n        if (this.lastMessagesId.length > 1000)\n          this.lastMessagesId = this.lastMessagesId.splice(100, 900);\n\n        // Add new message to readed\n        this.lastMessagesId.push(msg.id);\n\n        // Check if this is a basic message\n        if (msg.snippet.type == 'textMessageEvent') {\n\n          this._signal('onMessage', new TextMessage(\n            msg.snippet.authorChannelId,\n            msg.authorDetails.displayName,\n            msg.snippet.displayMessage,\n            'yt'\n          ));\n          return;\n        }\n\n        // Check if message have superchat data (like bits for Twitch)\n        if (msg.snippet.type == 'superChatEvent') {\n          this._signal('onSuperchat', new DonateMessage(\n            msg.snippet.authorChannelId,\n            msg.authorDetails.displayName,\n            msg.snippet.superChatDetails.tier > 5 ? 5 : msg.snippet.superChatDetails.tier,\n            1,\n            'yt'\n          ));\n\n          this._log(\"Get donate from \" + msg.authorDetails.displayName + \" - \" + msg.snippet.superChatDetails.amountMicros);\n          return;\n        }\n\n        else if (msg.snippet.type == 'superStickerEvent') {\n          this._signal('onSuperchat', new DonateMessage(\n            msg.snippet.authorChannelId,\n            msg.authorDetails.displayName,\n            msg.snippet.superStickerDetails.tier > 5 ? 5 : msg.snippet.superStickerDetails.tier,\n            1,\n            'yt'\n          ));\n\n          this._log(\"Get donate from \" + msg.authorDetails.displayName + \" - \" + msg.snippet.superChatDetails.amountMicros);\n          return;\n        }\n\n        // Check if this is new subscriber\n        if (msg.snippet.type == 'newSponsorEvent') {\n          this._signal('onSub', new Subscriber(\n            msg.snippet.authorChannelId,\n            msg.authorDetails.displayName,\n            'yt'\n          ));\n\n          this._log(\"New subscriber \" + msg.authorDetails.displayName);\n          return;\n        }\n      });\n    })\n  }\n\n  _log (msg) {\n    console.log('%cYoutube%c ' + msg, this.consoleStyle, '');\n  }\n\n  _signal (name, data) {\n\n    this.events[name](data);\n\n  }\n\n}","import ITMRText from './models/ITMRText'\nimport t from '../plugins/locale/translateFunction'\n\nexport default class IsaacConnect {\n\n  constructor (port = 8666, lang = \"en\") {\n    // Requests count\n    this.stats = {\n      success: 0, // Success requests (including successful attempts)\n      errors: 0   // Failed requests\n    };\n\n    this.isConnected = false;\n\n    // Event handlers\n    this.events = {\n      onConnect: () => {},\n      onReconnect: () => {}\n    };\n\n    this.port = port; // Game port\n    this.lang = lang; // Localization\n\n    // Game to site handlers\n    this.handlers = {};\n\n    // Timers\n    this.checkOutputTimer = null;\n    this.searchServerTimer = setInterval(this.search.bind(this), 1000);\n\n    this.consoleStyle = 'background-color: #EFD8CD; color: #473A3C; border-radius: 100px;padding: 1px 4px;';\n\n    this._log('Search game server...')\n  }\n\n  /**\n   * Search active game server\n   */\n  search () {\n    fetch(`http://localhost:${this.port}`, {\n      method: 'POST',\n      body: `||{\"m\":\"ping\"}||\\n`\n    })\n    .then (res => res.json())\n    .then (res => {\n      if (res.out == \"pong\") {\n        this._log('Game server found')\n        clearInterval(this.searchServerTimer);\n        this.connect()\n      }\n    })\n    .catch (err => {})\n  }\n\n  /**\n   * Stop current game server searching\n   */\n  stopSearch() {\n    clearInterval(this.searchServerTimer);\n  }\n\n  /**\n   * Test requests\n   */\n  testConnect () {\n    setInterval(() => {\n      fetch(`http://localhost:${this.port}`, {\n        method: 'POST',\n        body: `||{\"m\":\"ping\"}||\\n`\n      })\n      .then (res => res.json())\n      .then (res => {\n        if (res.out == \"pong\") {\n          this.stats.success ++;\n        }\n      })\n      .catch (err => {this.stats.errors ++;})\n\n      this._log(`${this.stats.success}|${this.stats.errors} / ${Math.round(this.stats.errors/(this.stats.success + this.stats.errors)*100, 2)}%`);\n    }, 250)\n  }\n\n  /**\n   * Send connect request to game server\n   */\n  connect () {\n    this.sendToGame({\n      m: 'connect'\n    })\n    .then (res => {\n      if (res.out == 'success') {\n        this._log('Game connected');\n\n        // Launch checking game output for two-way connection\n        //this.checkOutputTimer = setInterval(() => this.checkOutput(), 1000);\n\n        this.isConnected = true;\n\n\n        this.clearAll().then(() => {\n          // Show text for player\n          this.sendToGame({\n            m: 'addText',\n            d: [new ITMRText('gameConnected', t('gameConnected', this.lang)).prepare()]\n          })\n\n          // Call event onConnect\n          this._signal('onConnect');\n        });\n\n      }\n    });\n  }\n\n\n  /**\n   * Clear all UI elements from mod in game\n   */\n  clearAll() {\n\n    return Promise.all([\n      // Remove pollframes\n      this.sendToGame({ m: 'removePollframes' }, true),\n\n      // Remove progress bar\n      this.sendToGame({ m: 'removeProgressBar' }, true),\n\n      // Clear text\n      this.sendToGame({\n        m: 'clearText'\n      }, true)\n    ]);\n\n  }\n\n\n  /**\n   * Send data to game server\n   * @param {Object} data - Data for sending to game\n   * @param {Boolean} high - If high = true, resend data more times if request failed\n   * @param {Number} repeat - Current attempt number\n   */\n  sendToGame (data, high = false, repeat = 0) {\n\n    return new Promise((resolve, reject) => {\n      this._send(data, repeat, high)\n      .then (res => res.json())\n      .catch(err => {\n        console.error(err);\n        reject(err);\n      })\n      .then(\n        res => {\n          this.isConnected = true;\n          resolve(res);\n        }\n      )\n      .catch(err => {\n        console.error(err);\n      });\n    });\n\n  }\n\n  /**\n   * Request output data from game\n   */\n  checkOutput () {\n    fetch(`http://localhost:${this.port}`, {\n      method: 'POST',\n      body: `||{\"m\":\"out\"}||\\n`\n    })\n    .then (res => res.json())\n    .then (res => {\n      if (!this.isConnected) {\n\n        console.log(\"send reconnect\");\n\n        this.sendToGame({\n          m: 'removeText',\n          d: ['siteMessage']\n        })\n\n        this._signal('onReconnect');\n      }\n\n\n      this.isConnected = true;\n      res.out.forEach(com => {\n        if (this.handlers[com.c]) {\n          this.handlers[com.c](com.d);\n        }\n        else {\n          this._log(`Not found handler for ${com.c}`);\n        }\n      });\n    })\n    .catch(err => {\n      this.isConnected = false;\n      this._log('Connection to Isaac skip request', 'warn');\n    })\n  }\n\n  /**\n   * Add handler for request\n   * @param {String} name - Value from field output.c in checkOutput method\n   * @param {Function} func - Function that is triggered when a command is received\n   */\n  addHandler (name, func) {\n    this.handlers[name] = func;\n  }\n\n /**\n * Remove existing handler\n * @param {String} name - Value from field output.c in checkOutput method\n */\n  removeHandler (name) {\n    delete this.handlers[name];\n  }\n\n  /**\n   * Using inside this class for calling callbacks for events\n   * @param {String} name - Event name\n   * @param {Object} data - Data from event\n   */\n  _signal(name, data = null) {\n    if (this.events[name]) {\n      this.events[name](data);\n    }\n  }\n\n  /**\n   * Log to console with style\n   * @param {String} msg - Message for console\n   * @param {String} type - Log function: log, warning or error\n   */\n  _log (msg, type = 'log') {\n    console[type]('%cITMR%c ' + msg, this.consoleStyle, '');\n  }\n\n  /**\n   *\n   * @param {Object} data - Data for sending\n   * @param {Number} repeat - Current attempt\n   * @param {Boolean} high - TRUE, if data has high priority\n   */\n  _send (data, repeat = 1, high = false) {\n    return fetch(`http://localhost:${this.port}`, {\n      method: 'POST',\n      body: `||${JSON.stringify(data)}||\\n`\n    }).catch(function (error) {\n\n      this.isConnected = false;\n      this._log('Connection to Isaac is broken', 'error');\n\n      if (repeat > 3 && !high) {\n        throw error;\n      }\n      if (repeat > 6 && high) {\n        throw error;\n      }\n      return this._send(data, repeat + 1, high);\n    }.bind(this));\n  }\n\n}","/* eslint-disable no-proto -- safe */\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar anObject = require('../internals/an-object');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n// eslint-disable-next-line es/no-object-setprototypeof -- safe\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\n    setter = uncurryThis(Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set);\n    setter(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    anObject(O);\n    aPossiblePrototype(proto);\n    if (CORRECT_SETTER) setter(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n","/* eslint-disable no-unused-vars -- required for functions `.length` */\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar apply = require('../internals/function-apply');\nvar wrapErrorConstructorWithCause = require('../internals/wrap-error-constructor-with-cause');\n\nvar WEB_ASSEMBLY = 'WebAssembly';\nvar WebAssembly = global[WEB_ASSEMBLY];\n\nvar FORCED = Error('e', { cause: 7 }).cause !== 7;\n\nvar exportGlobalErrorCauseWrapper = function (ERROR_NAME, wrapper) {\n  var O = {};\n  O[ERROR_NAME] = wrapErrorConstructorWithCause(ERROR_NAME, wrapper, FORCED);\n  $({ global: true, constructor: true, arity: 1, forced: FORCED }, O);\n};\n\nvar exportWebAssemblyErrorCauseWrapper = function (ERROR_NAME, wrapper) {\n  if (WebAssembly && WebAssembly[ERROR_NAME]) {\n    var O = {};\n    O[ERROR_NAME] = wrapErrorConstructorWithCause(WEB_ASSEMBLY + '.' + ERROR_NAME, wrapper, FORCED);\n    $({ target: WEB_ASSEMBLY, stat: true, constructor: true, arity: 1, forced: FORCED }, O);\n  }\n};\n\n// https://github.com/tc39/proposal-error-cause\nexportGlobalErrorCauseWrapper('Error', function (init) {\n  return function Error(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('EvalError', function (init) {\n  return function EvalError(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('RangeError', function (init) {\n  return function RangeError(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('ReferenceError', function (init) {\n  return function ReferenceError(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('SyntaxError', function (init) {\n  return function SyntaxError(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('TypeError', function (init) {\n  return function TypeError(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('URIError', function (init) {\n  return function URIError(message) { return apply(init, this, arguments); };\n});\nexportWebAssemblyErrorCauseWrapper('CompileError', function (init) {\n  return function CompileError(message) { return apply(init, this, arguments); };\n});\nexportWebAssemblyErrorCauseWrapper('LinkError', function (init) {\n  return function LinkError(message) { return apply(init, this, arguments); };\n});\nexportWebAssemblyErrorCauseWrapper('RuntimeError', function (init) {\n  return function RuntimeError(message) { return apply(init, this, arguments); };\n});\n","export default class ITMRColor {\n\n  /**\n   * Create new color from RGBA data\n   * @param {Number} r - Red from 0 to 255\n   * @param {Number} g - Green from 0 to 255\n   * @param {Number} b - Blue from 0 to 255\n   * @param {Number} a - Alpha from 0 to 1\n   */\n  constructor(r,g,b,a) {\n    this.r = r/255;\n    this.g = g/255;\n    this.b = b/255;\n    this.a = a\n  }\n\n}","import {TextMessage, DonateMessage, Subscriber, Follower} from './streamEvents';\n\nexport default class TwitchConnect {\n\n  /**\n   * Create new chat object for Twitch\n   * @param {String} channel - Streamer nickname\n   */\n  constructor (channel) {\n    this.channel = channel;\n    this.userId = null;\n    this.viewersCount = 0;\n\n    this.apikey = \"vtr91vw1dzji7piypq7r13itr6is2i\"; // API Key for Twitch API. Not very secret information\n    this.botname = \"justinfan666\";\n    this.server = \"irc-ws.chat.twitch.tv\";\n\n    this.consoleStyle = 'background-color: #6441A4; color: #FFFFFF; border-radius: 100px;padding: 1px 4px;';\n\n    this.lastFollowers = [];\n    this.plannedDisconnect = false;\n\n    this.events = {\n      onMessage: () => {},\n      onSub: () => {},\n      onFollower: () => {},\n      onBits: () => {},\n\n      onConnect: () => {},\n      onDisconnect: () => {},\n      onError: () => {}\n    }\n  }\n\n  /**\n   * Connect to Twitch chat using websockets\n   */\n  connect () {\n    if (window.location.protocol.includes('https')) {\n      this.webSocket = new WebSocket('wss://' + this.server + ':443/', 'irc');\n    }\n    else {\n      this.webSocket = new WebSocket('ws://' + this.server + ':80/', 'irc');\n    }\n\n\n    this.webSocket.onmessage = this.onMessage.bind(this);\n    this.webSocket.onerror = this.onError.bind(this);\n    this.webSocket.onclose = this.onClose.bind(this);\n    this.webSocket.onopen = this.onOpen.bind(this);\n  }\n\n  /**\n   * Lauching request for checking new followers.\n   * Not working, because requires backend implementation\n   */\n  startCheckNewFollowers () {\n    this.checkFollowersFrom = Date.now();\n\n    let waitUserId = setInterval((() => {\n      if (this.userId) {\n        clearInterval(waitUserId);\n        this._checkFollowers();\n        this.updFollowersTimer = setInterval(this._checkFollowers.bind(this), 3*60*1000);\n      }\n    }).bind(this), 500);\n  }\n\n  /**\n   * Disable followers checking\n   */\n  stopCheckNewFollowers () {\n    clearInterval(this.updFollowersTimer);\n  }\n\n  updateViewers () {\n\n    return fetch(`https://api.twitch.tv/helix/streams?user_login=${this.channel}`, {\n      headers: { 'Client-ID': this.apikey },\n    })\n    .then(res => res.json())\n    .then(res => {\n      if (res.stream) {\n        this.viewersCount = res.stream.viewers\n      }\n    })\n\n  }\n\n  /**\n   * Calling whem new message received\n   * @param {String} msg - Raw message from Twitch\n   */\n  onMessage(msg) {\n    // Ignore incorrect messages\n    if (msg == null) return;\n\n    // Try to parse message\n    let parsed = this._parseMessage(msg.data);\n\n    //Ignore unparsed messages\n    if (parsed == null) return;\n\n    // Get PING, send PONG\n    if (parsed.command === \"PING\") {\n      this.webSocket.send(\"PONG :\" + parsed.message);\n      return;\n    }\n\n    // Get user id\n    if (parsed.command === \"ROOMSTATE\") {\n      this.userId = parsed.tags['room-id'];\n      return;\n    }\n\n    // Handle subscribers\n    if (parsed.command == \"USERNOTICE\" && (parsed.tags[\"msg-id\"].includes('sub') || parsed.tags[\"msg-id\"].includes('gift'))) {\n\n      // Gifted subs\n      if (parsed.tags.hasOwnProperty(\"msg-param-recipient-display-name\")) {\n        this._signal('onSub', new Subscriber(\n          parsed.tags[\"msg-param-recipient-id\"],\n          parsed.tags[\"msg-param-recipient-display-name\"],\n          'tw'\n        ));\n\n        this._log(\"New gifted subscriber \" + parsed.tags[\"msg-param-recipient-display-name\"]);\n      }\n\n      // Basic subs\n      else {\n        this._signal('onSub', new Subscriber(\n          parsed.tags[\"user-id\"],\n          parsed.tags[\"display-name\"],\n          'tw'\n        ));\n      }\n\n      this._log(\"New subscriber \" + parsed.tags[\"display-name\"]);\n    }\n\n    // Handle bits\n    else if (parsed.command == \"PRIVMSG\" && parsed.tags.hasOwnProperty('bits')) {\n\n      let bits = parseFloat(parsed.tags[\"bits\"]);\n      let bitsType = 1;\n      let bitsCount = bits > 10 ? 10 : bits;\n\n      if (bits < 10) return;\n\n      if (bits / 100 >= 1) {\n        bitsType = 2;\n        bitsCount = Math.round(bits / 100);\n      }\n\n      if (bits / 1000 >= 1) {\n        bitsType = 3;\n        bitsCount = Math.round(bits / 1000);\n      }\n\n      if (bits / 5000 >= 1) {\n        bitsType = 4;\n        bitsCount = Math.round(bits / 5000);\n      }\n\n      if (bits / 10000 >= 1) {\n        bitsType = 5;\n        bitsCount = Math.round(bits / 10000);\n      }\n\n      bitsCount = bitsCount > 10 ? 10 : bitsCount;\n\n      this._signal('onBits', new DonateMessage(\n        parsed.tags[\"user-id\"],\n        parsed.tags[\"display-name\"],\n        bitsCount,\n        bitsType,\n        'tw'\n      ));\n\n      this._log(\"Get donate from \" + parsed.tags[\"display-name\"] + \" - \" + parsed.tags[\"bits\"]);\n    }\n\n    // Handle default message\n    else if (parsed.command == \"PRIVMSG\") {\n      this._signal('onMessage', new TextMessage(\n        parsed.tags[\"user-id\"],\n        parsed.tags[\"display-name\"],\n        parsed.message,\n        'tw'\n      ));\n    }\n  }\n\n  /**\n   * Called on error with websocket\n   * @param {String} msg\n   */\n  onError (msg) {\n    this._signal('onError', msg);\n    this._log(\"Error: \");\n    console.log(msg);\n  }\n\n  /**\n   * Called on disconnect from websocket\n   */\n  onClose () {\n    if (this.plannedDisconnect) {\n      this._signal('onDisconnect');\n    }\n    else {\n      this.connect();\n    }\n\n    this._log(\"Disconnect from websocket\");\n  }\n\n  /**\n   * Called when connection with chat established\n   */\n  onOpen () {\n    if (this.webSocket !== null && this.webSocket.readyState === 1) {\n      this._log(\"Connected to websocket\");\n\n      this.webSocket.send('CAP REQ :twitch.tv/tags twitch.tv/commands twitch.tv/membership');\n      this.webSocket.send('NICK ' + this.botname);\n      this.webSocket.send('JOIN #' + this.channel.toLowerCase());\n\n      this._signal('onConnect');\n    }\n  }\n\n  /**\n   * Close current connection with Twitch chat\n   */\n  close () {\n    this.plannedDisconnect = true;\n    if(this.webSocket){\n      this.webSocket.close();\n    }\n  }\n\n  _signal (name, data) {\n    this.events[name](data);\n  }\n\n  _checkFollowers () {\n    fetch (\"https://api.twitch.tv/helix/users/follows?first=100&to_id=\" + this.userId, {\n      headers: {\n        'Client-ID': this.apikey\n      }\n    })\n    .then (res => res.json())\n    .then (res => {\n      res.data.forEach(follower => {\n        // If follower exists, skip it\n        if (this.lastFollowers.includes(follower.from_id)) return;\n\n        // Check array size and clear it if need\n        if (this.lastFollowers > 1000)\n          this.lastFollowers = this.lastFollowers.splice(100, 900);\n\n        // Add new follower to readed\n        this.lastFollowers.push(follower.from_id);\n\n        if (new Date(follower.followed_at) < this.checkFollowersFrom) return;\n\n        this._signal('onFollower', new Follower(\n          follower.from_id,\n          follower.from_name,\n          'tw'\n        ));\n\n        this._log(\"New follower \" + follower.from_name);\n      })\n    })\n  }\n\n  _log (msg) {\n    console.log('%cTwitch%c ' + msg, this.consoleStyle, '');\n  }\n\n  _parseMessage(rawMessage) {\n    let parsedMessage = {\n        message: null,\n        tags: null,\n        command: null,\n        original: rawMessage,\n        channel: null,\n        username: null\n    };\n\n    if(rawMessage[0] === '@') {\n        let tagIndex = rawMessage.indexOf(' '),\n        userIndex = rawMessage.indexOf(' ', tagIndex + 1),\n        commandIndex = rawMessage.indexOf(' ', userIndex + 1),\n        channelIndex = rawMessage.indexOf(' ', commandIndex + 1),\n        messageIndex = rawMessage.indexOf(':', channelIndex + 1);\n\n        // Parse tags to key-value dictionary\n        let tags = rawMessage.slice(0, tagIndex) != null ? rawMessage.slice(0, tagIndex).substr(1).split(\";\") : [];\n        let keyedTags = {};\n\n        tags.forEach(val => {\n          let splitted = val.split('=');\n          keyedTags[splitted[0]] = splitted[1];\n        });\n\n        parsedMessage.tags = keyedTags;\n\n        parsedMessage.username = rawMessage.slice(tagIndex + 2, rawMessage.indexOf('!'));\n        parsedMessage.command = rawMessage.slice(userIndex + 1, commandIndex);\n        parsedMessage.channel = rawMessage.slice(commandIndex + 1, channelIndex);\n        parsedMessage.message = rawMessage.slice(messageIndex + 1);\n    }\n    else if (rawMessage.startsWith(\"PING\")) {\n        parsedMessage.command = \"PING\";\n        parsedMessage.message = rawMessage.split(\":\")[1];\n    }\n\n    return parsedMessage;\n  }\n}","var toString = require('../internals/to-string');\n\nmodule.exports = function (argument, $default) {\n  return argument === undefined ? arguments.length < 2 ? '' : $default : toString(argument);\n};\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar hasOwn = require('../internals/has-own-property');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar proxyAccessor = require('../internals/proxy-accessor');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar normalizeStringArgument = require('../internals/normalize-string-argument');\nvar installErrorCause = require('../internals/install-error-cause');\nvar clearErrorStack = require('../internals/error-stack-clear');\nvar ERROR_STACK_INSTALLABLE = require('../internals/error-stack-installable');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar IS_PURE = require('../internals/is-pure');\n\nmodule.exports = function (FULL_NAME, wrapper, FORCED, IS_AGGREGATE_ERROR) {\n  var STACK_TRACE_LIMIT = 'stackTraceLimit';\n  var OPTIONS_POSITION = IS_AGGREGATE_ERROR ? 2 : 1;\n  var path = FULL_NAME.split('.');\n  var ERROR_NAME = path[path.length - 1];\n  var OriginalError = getBuiltIn.apply(null, path);\n\n  if (!OriginalError) return;\n\n  var OriginalErrorPrototype = OriginalError.prototype;\n\n  // V8 9.3- bug https://bugs.chromium.org/p/v8/issues/detail?id=12006\n  if (!IS_PURE && hasOwn(OriginalErrorPrototype, 'cause')) delete OriginalErrorPrototype.cause;\n\n  if (!FORCED) return OriginalError;\n\n  var BaseError = getBuiltIn('Error');\n\n  var WrappedError = wrapper(function (a, b) {\n    var message = normalizeStringArgument(IS_AGGREGATE_ERROR ? b : a, undefined);\n    var result = IS_AGGREGATE_ERROR ? new OriginalError(a) : new OriginalError();\n    if (message !== undefined) createNonEnumerableProperty(result, 'message', message);\n    if (ERROR_STACK_INSTALLABLE) createNonEnumerableProperty(result, 'stack', clearErrorStack(result.stack, 2));\n    if (this && isPrototypeOf(OriginalErrorPrototype, this)) inheritIfRequired(result, this, WrappedError);\n    if (arguments.length > OPTIONS_POSITION) installErrorCause(result, arguments[OPTIONS_POSITION]);\n    return result;\n  });\n\n  WrappedError.prototype = OriginalErrorPrototype;\n\n  if (ERROR_NAME !== 'Error') {\n    if (setPrototypeOf) setPrototypeOf(WrappedError, BaseError);\n    else copyConstructorProperties(WrappedError, BaseError, { name: true });\n  } else if (DESCRIPTORS && STACK_TRACE_LIMIT in OriginalError) {\n    proxyAccessor(WrappedError, OriginalError, STACK_TRACE_LIMIT);\n    proxyAccessor(WrappedError, OriginalError, 'prepareStackTrace');\n  }\n\n  copyConstructorProperties(WrappedError, OriginalError);\n\n  if (!IS_PURE) try {\n    // Safari 13- bug: WebAssembly errors does not have a proper `.name`\n    if (OriginalErrorPrototype.name !== ERROR_NAME) {\n      createNonEnumerableProperty(OriginalErrorPrototype, 'name', ERROR_NAME);\n    }\n    OriginalErrorPrototype.constructor = WrappedError;\n  } catch (error) { /* empty */ }\n\n  return WrappedError;\n};\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","import l_En from './locales/en';\nimport l_Ru from './locales/ru';\n\nexport default function t (val, locale) {\n  if (locale == \"ru\") {\n    if (l_Ru.strings[val])\n      return l_Ru.strings[val];\n    else\n      return `!${val}!`;\n  }\n  else {\n    if (l_En.strings[val])\n      return l_En.strings[val];\n    else\n      return `!${val}!`;\n  }\n}"],"sourceRoot":""}